<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Feed Booking ‚Ä¢ Aquaculture A‚ÄìZ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={
      darkMode:'class',
      theme:{
        extend:{
          boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'}
        }
      }
    }
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%)}
    .field{
      border:1px solid rgb(226,232,240);
      border-radius:.5rem;
      padding:.5rem .6rem;
      background:#fff;
      color:#111827;
    }
    .dark .field{
      background:#0f172a;
      border-color:#334155;
      color:#e2e8f0;
    }
    .btn{padding:.6rem 1rem;border-radius:.75rem;font-weight:600}
    .btn-primary{background:#059669;color:#fff}
    .btn-primary[disabled]{opacity:.5;cursor:not-allowed}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Header with Back Button -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 
                 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-4xl mx-auto px-4 py-3 flex items-center gap-3">
      <a href="vendors.html" 
         class="rounded-lg px-3 py-1.5 border border-slate-200 dark:border-slate-800">‚Üê</a>
      <h1 class="text-lg font-bold flex-1">Feed Booking</h1>
      <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border 
              border-slate-200 dark:border-slate-800">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <main class="max-w-4xl mx-auto p-4 space-y-6">
    <!-- Booking Form -->
    <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border 
                border-slate-200 dark:border-slate-800 space-y-4">

      <label class="text-sm">Feed Company
        <select id="feedCompany" class="mt-1 field w-full">
          <option value="">Select Feed</option>
          <option>Avanthi</option>
          <option>CP</option>
        </select>
      </label>

      <!-- Cash/Credit -->
      <div class="flex gap-6">
        <label class="text-sm flex items-center gap-2">
          <input type="radio" name="payType" value="cash" checked> Spot Cash
        </label>
        <label class="text-sm flex items-center gap-2">
          <input type="radio" name="payType" value="credit"> Credit (‡∞Ö‡∞™‡±ç‡∞™‡±Å)
        </label>
      </div>

      <!-- Quantity -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <label class="text-sm">Quantity Type
          <select id="qtyType" class="mt-1 field w-full">
            <option value="">Select</option>
            <option value="bag">Bags / ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ó‡±ç‡∞∏‡±ç</option>
            <option value="ton">Tons / ‡∞ü‡∞®‡±ç‡∞®‡±Å‡∞≤‡±Å</option>
          </select>
        </label>
        <label class="text-sm">Quantity
          <input id="qty" type="number" class="mt-1 field w-full" value="0">
        </label>
        <label class="text-sm">Feed Cost
          <input id="feedCost" type="text" class="mt-1 field w-full" readonly>
        </label>
      </div>

      <!-- Transport -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
        <label class="text-sm">Transport Type
          <select id="transportType" class="mt-1 field w-full">
            <option value="auto">Auto Van (‚Çπ80/km)</option>
            <option value="big">Big Van (‚Çπ150/km)</option>
          </select>
        </label>
        <label class="text-sm">Distance (km)
          <input id="distance" type="number" class="mt-1 field w-full" value="0">
        </label>
        <label class="text-sm">Transport Cost
          <input id="transCost" type="text" class="mt-1 field w-full" readonly>
        </label>
      </div>

      <!-- Customer -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
        <label class="text-sm">Customer Mobile *
          <input id="custMobile" type="tel" maxlength="10" 
                 class="mt-1 field w-full" placeholder="9xxxxxxxxx">
        </label>
        <label class="text-sm">Address *
          <div class="flex gap-2">
            <input id="custAddress" class="field flex-1" placeholder="Village, Mandal, District">
            <button id="locBtn" class="btn border">üìç</button>
          </div>
        </label>
      </div>

      <!-- Final -->
      <div class="p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex justify-between">
        <div>üßÆ Grand Total: <b id="grandTotal">‚Çπ 0</b></div>
        <button id="finalBook" class="btn btn-primary">Finalize Booking</button>
      </div>
    </div>
  </main>

  <script>
    // Prices
    const PRICES={
      cash:{bag:2100,ton:84000},
      credit:{bag:2250,ton:90000}
    };
    const TRANS={auto:80,big:150};

    function calcTotals(){
      const payType=document.querySelector("input[name=payType]:checked").value;
      const qtyType=document.getElementById("qtyType").value;
      const qty=+document.getElementById("qty").value||0;
      const dist=+document.getElementById("distance").value||0;
      let feedCost=0,transCost=0;

      if(qtyType && qty){
        feedCost=PRICES[payType][qtyType]*qty;
      }
      const tType=document.getElementById("transportType").value;
      if(dist>0){
        transCost=TRANS[tType]*dist;
      }
      document.getElementById("feedCost").value="‚Çπ "+feedCost.toLocaleString();
      document.getElementById("transCost").value="‚Çπ "+transCost.toLocaleString();
      document.getElementById("grandTotal").textContent="‚Çπ "+(feedCost+transCost).toLocaleString();
    }

    // Auto update
    document.querySelectorAll("#qtyType,#qty,[name=payType],#transportType,#distance")
      .forEach(el=>el.addEventListener("input",calcTotals));

    // Location
    document.getElementById("locBtn").onclick=(e)=>{
      e.preventDefault();
      navigator.geolocation?.getCurrentPosition(pos=>{
        document.getElementById("custAddress").value=
          `Lat:${pos.coords.latitude.toFixed(4)}, Lng:${pos.coords.longitude.toFixed(4)}`;
      });
    };

    // Dark mode
    if(localStorage.getItem("theme")==="dark"){
      document.documentElement.classList.add("dark");
    }
    document.getElementById("themeToggle").onclick=()=>{
      document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme",
        document.documentElement.classList.contains("dark")?"dark":"light");
    };
  </script>
</body>
</html>
