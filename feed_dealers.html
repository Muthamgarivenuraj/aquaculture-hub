<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Feed Dealers ‚Ä¢ Aquaculture A‚ÄìZ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={darkMode:'class'}
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%)}
    .field{border:1px solid #e2e8f0;border-radius:.5rem;padding:.5rem .6rem}
    .dark .field{background:#0b1220;border-color:#334155;color:#e2e8f0}
    .btn{padding:.6rem 1rem;border-radius:.75rem;background:#059669;color:#fff}
    .btn[disabled]{opacity:.5;cursor:not-allowed}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
<header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b dark:border-slate-800">
  <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
    <h1 class="text-lg font-bold">Feed Dealers</h1>
    <button id="themeToggle" class="rounded-full px-3 py-1.5 border">üåô/‚òÄÔ∏è</button>
  </div>
</header>

<main class="max-w-5xl mx-auto p-4 space-y-6">
  <!-- Selectors -->
  <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 border space-y-4">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <label class="text-sm">State
        <select id="sState" class="mt-1 field w-full"><option value="">Select</option></select>
      </label>
      <label class="text-sm">District
        <select id="sDistrict" class="mt-1 field w-full"><option value="">Select</option></select>
      </label>
      <label class="text-sm">Dealer
        <select id="sDealer" class="mt-1 field w-full"><option value="">Select</option></select>
      </label>
    </div>

    <div id="dealerDetails" class="hidden p-4 rounded-xl border dark:border-slate-700 bg-slate-50 dark:bg-slate-800">
      <h2 id="dName" class="font-bold text-lg"></h2>
      <p id="dLoc" class="text-sm"></p>
      <p><b>Company:</b> <span id="dCompany"></span></p>
      <p>üìû <span id="dPhone"></span></p>
      <button id="bookBtn" class="btn mt-3">Book</button>
    </div>
  </div>

  <!-- Booking Form -->
  <div id="bookingForm" class="hidden rounded-2xl p-4 bg-white dark:bg-slate-900 border space-y-4">
    <label class="text-sm">Feed Company
      <select id="feedType" class="mt-1 field w-full">
        <option value="">Select Feed</option>
        <option>Avanthi</option>
        <option>CP</option>
        <option>Growel</option>
      </select>
    </label>

    <div class="flex gap-4 mt-2">
      <label><input type="radio" name="payType" value="cash" checked> Spot Cash</label>
      <label><input type="radio" name="payType" value="credit"> Credit</label>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-3 mt-3">
      <label class="text-sm">Quantity Type
        <select id="qtyType" class="mt-1 field w-full">
          <option value="">Select</option>
          <option value="bag">Bags</option>
          <option value="ton">Tons</option>
        </select>
      </label>
      <label class="text-sm">Quantity
        <input id="qty" type="number" value="1" class="mt-1 field w-full">
      </label>
      <label class="text-sm">Feed Cost
        <input id="fCost" type="text" class="mt-1 field w-full" readonly>
      </label>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
      <label class="text-sm">Transport Type
        <select id="vehicle" class="mt-1 field w-full">
          <option value="80">Auto Van (‚Çπ80/km)</option>
          <option value="150">Big Truck (‚Çπ150/km)</option>
        </select>
      </label>
      <label class="text-sm">Distance (km)
        <input id="distance" type="number" value="0" class="mt-1 field w-full">
      </label>
      <label class="text-sm">Transport Cost
        <input id="tCost" type="text" class="mt-1 field w-full" readonly>
      </label>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
      <label class="text-sm">Customer Mobile
        <input id="custMobile" type="tel" placeholder="9xxxxxxxxx" class="mt-1 field w-full">
      </label>
      <label class="text-sm">Address
        <input id="custAddress" class="mt-1 field w-full" placeholder="Village, Mandal, District">
      </label>
    </div>

    <div class="p-3 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex justify-between">
      <div>üßÆ Grand Total: <b id="grandTotal">‚Çπ 0</b></div>
      <button id="finalBook" class="btn" disabled>Finalize Booking</button>
    </div>
  </div>
</main>

<script>
  const dealers=[{state_en:"Andhra Pradesh",district_en:"Nellore",dealer_en:"Venu Aqua",company:"Avanthi",phone:"9963643062"}];

  function fillStates(){sState.innerHTML='<option value="">Select</option>'+[...new Set(dealers.map(d=>d.state_en))].map(s=>`<option>${s}</option>`).join('');}
  function fillDistrict(){sDistrict.innerHTML='<option value="">Select</option>'+[...new Set(dealers.filter(d=>d.state_en===sState.value).map(d=>d.district_en))].map(d=>`<option>${d}</option>`).join('');}
  function fillDealer(){sDealer.innerHTML='<option value="">Select</option>'+dealers.filter(x=>x.state_en===sState.value&&x.district_en===sDistrict.value).map(x=>`<option>${x.dealer_en}</option>`).join('');}
  function showDealer(){const x=dealers.find(x=>x.state_en===sState.value&&x.district_en===sDistrict.value&&x.dealer_en===sDealer.value);if(!x)return;dealerDetails.classList.remove("hidden");dName.textContent=x.dealer_en;dLoc.textContent=`${x.district_en}, ${x.state_en}`;dCompany.textContent=x.company;dPhone.textContent=x.phone;bookBtn.onclick=()=>bookingForm.classList.remove("hidden");}

  function calcFeedCost(){
    const qty=+document.getElementById("qty").value||0;
    const type=document.querySelector('input[name="payType"]:checked').value;
    const unit=qtyType.value;let cost=0;
    if(type==="cash"){if(unit==="bag")cost=qty*2100;if(unit==="ton")cost=qty*84000;}
    else{if(unit==="bag")cost=qty*2250;if(unit==="ton")cost=qty*90000;}
    fCost.value="‚Çπ "+cost;return cost;
  }

  function updateTransport(){tCost.value="‚Çπ "+((+distance.value||0)*(+vehicle.value||0));updateGrand();}
  function updateGrand(){const feed=calcFeedCost();const t=(+distance.value||0)*(+vehicle.value||0);grandTotal.textContent="‚Çπ "+(feed+t);finalBook.disabled=false;}

  finalBook.onclick=()=>alert("‚úÖ Feed booking confirmed!");

  document.addEventListener("DOMContentLoaded",()=>{
    if(localStorage.getItem("theme")==="dark"){document.documentElement.classList.add("dark");}
    themeToggle.onclick=()=>{document.documentElement.classList.toggle("dark");localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light");};
    fillStates();sState.onchange=fillDistrict;sDistrict.onchange=fillDealer;sDealer.onchange=showDealer;
    qty.oninput=updateGrand;qtyType.onchange=()=>{qty.value=1;updateGrand();};
    document.querySelectorAll('input[name="payType"]').forEach(r=>r.onchange=updateGrand);
    vehicle.onchange=updateTransport;distance.oninput=updateTransport;
  });
</script>
</body>
</html>
