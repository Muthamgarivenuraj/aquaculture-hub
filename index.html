<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Aquaculture A‚ÄìZ ‚Ä¢ Home (Mobile Lang + Sidebar)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class',theme:{extend:{boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'}}}}</script>
  <style>
    html{scroll-behavior:smooth}
    body{background:linear-gradient(135deg,#dbeafe 0%,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0%,#082f49 50%,#14532d 100%)}
    .navbtn{border:1px solid rgb(226,232,240);padding:.6rem .9rem;border-radius:.75rem;background:#fff;font-weight:500}
    .dark .navbtn{background:#0b1220;border-color:#1f2937}
    /* Flash news ticker */
    .ticker{overflow:hidden;mask-image:linear-gradient(90deg,transparent,black 8%,black 92%,transparent);-webkit-mask-image:linear-gradient(90deg,transparent,black 8%,black 92%,transparent)}
    .ticker-track{display:flex;gap:24px;white-space:nowrap;min-width:max-content;animation:ticker 20s linear infinite}
    @keyframes ticker{from{transform:translateX(0)} to{transform:translateX(-50%)}}
    @media (max-width:640px){.ticker{mask-image:none;-webkit-mask-image:none}.ticker-track{gap:16px;animation-duration:28s}}
    /* Harvest-only blink */
    @keyframes blink{0%,100%{opacity:1;background-color:#facc15;color:#111827}50%{opacity:1;background-color:#dc2626;color:#fff}}
    .blink{animation:blink 1.2s infinite}
    /* Drawer */
    .drawer{transform:translateX(-100%);transition:transform .25s ease}
    .drawer.open{transform:translateX(0)}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Header -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
      <!-- Mobile: Hamburger -->
      <button id="openDrawer" class="sm:hidden rounded-lg px-3 py-2 border border-slate-200 dark:border-slate-800">‚ò∞</button>

      <h1 class="text-xl font-bold flex-1" data-i18n="app_title">Aquaculture A‚ÄìZ</h1>

      <!-- Desktop nav -->
      <nav class="hidden sm:flex gap-2">
        <a href="harvest.html" class="navbtn">üöö <span data-i18n="t_harvest">Harvest</span></a>
        <a href="seeds.html" class="navbtn">ü¶ê <span data-i18n="t_seeds">Seeds</span></a>
        <a href="dealers.html" class="navbtn">üè™ <span data-i18n="t_dealers">Dealers</span></a>
      </nav>

      <!-- Desktop: TE/EN buttons -->
      <div class="hidden sm:flex rounded-full bg-slate-100 dark:bg-slate-900 p-1 border border-slate-200 dark:border-slate-800">
        <button id="langTE_btn" class="px-3 py-1.5 text-sm rounded-full bg-white dark:bg-slate-800 shadow-soft">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
        <button id="langEN_btn" class="px-3 py-1.5 text-sm rounded-full">English</button>
      </div>

      <!-- Mobile: Language dropdown -->
      <select id="langSelect" class="sm:hidden rounded-md border px-2 py-2 text-sm dark:bg-slate-900 dark:border-slate-800">
        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
        <option value="en">English</option>
      </select>

      <!-- Theme -->
      <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border border-slate-200 dark:border-slate-800">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <!-- Sidebar Drawer + Overlay (mobile) -->
  <div id="overlay" class="fixed inset-0 bg-black/40 z-30 hidden"></div>
  <aside id="drawer" class="drawer fixed inset-y-0 left-0 w-64 bg-white dark:bg-slate-950 border-r border-slate-200 dark:border-slate-800 z-40 p-4">
    <div class="flex items-center justify-between mb-4">
      <span class="font-semibold">Menu</span>
      <button id="closeDrawer" class="rounded-md px-2 py-1 border border-slate-200 dark:border-slate-800">‚úï</button>
    </div>
    <nav class="grid gap-2">
      <a href="index.html" class="navbtn">üè† <span data-i18n="t_home">Home</span></a>
      <a href="harvest.html" class="navbtn">üöö <span data-i18n="t_harvest">Harvest</span></a>
      <a href="seeds.html" class="navbtn">ü¶ê <span data-i18n="t_seeds">Seeds</span></a>
      <a href="dealers.html" class="navbtn">üè™ <span data-i18n="t_dealers">Dealers</span></a>
    </nav>
  </aside>

  <main class="max-w-7xl mx-auto p-4 space-y-4">
    <!-- Flash News -->
    <section class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold">üì∞ <span data-i18n="flash_news">Flash News</span></h3>
        <span class="text-xs px-2 py-1 rounded-full bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200">Live</span>
      </div>
      <div class="mt-3 ticker"><div id="newsTrackTop" class="ticker-track"></div></div>
      <p class="text-xs text-slate-500 mt-2"><span data-i18n="updated">Updated</span>: <span id="newsUpdatedTop">‚Äî</span></p>
    </section>

    <!-- Rates + Promotions -->
    <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <!-- Rates -->
      <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold" data-i18n="snapshot">Live Snapshot</h3>
          <p class="text-xs text-slate-500"><span data-i18n="updated">Updated</span>: <span id="updatedAt">‚Äî</span></p>
        </div>
        <div class="mt-3 overflow-x-auto">
          <table class="min-w-full text-sm" id="ratesTable">
            <thead>
              <tr class="border-b dark:border-slate-800 text-slate-500">
                <th class="text-left py-2 pr-4" data-i18n="th_count">Count</th>
                <th class="text-left py-2 pr-4" data-i18n="th_price">Price (‚Çπ/kg)</th>
                <th class="text-left py-2 pr-4" data-i18n="th_change">Change</th>
              </tr>
            </thead><tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Promotions (i18n) -->
      <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
        <div class="flex items-center justify-between">
          <h3 class="font-semibold">üì£ <span data-i18n="promotions_title">Promotions</span></h3>
          <span class="text-xs px-2 py-1 rounded-full bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200">NEW</span>
        </div>
        <div class="relative mt-3 overflow-hidden rounded-xl border border-slate-200 dark:border-slate-800">
          <div id="promoSlides" class="flex transition-transform duration-500">
            <article class="min-w-full p-4 bg-emerald-50 dark:bg-emerald-900/20">
              <span class="inline-flex text-xs font-bold px-2 py-1 rounded-full bg-emerald-200 text-emerald-900 dark:bg-emerald-800 dark:text-emerald-100" data-i18n="promo_chip_today">Today</span>
              <h4 class="mt-2 text-lg font-semibold" data-i18n="promo_ice_title">Ice Booking ‚Äî ‚Çπ2,400 / ton</h4>
              <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="promo_ice_text">Factory-grade ice. Fast loading.</p>
            </article>
            <article class="min-w-full p-4 bg-sky-50 dark:bg-sky-900/20">
              <span class="inline-flex text-xs font-bold px-2 py-1 rounded-full bg-sky-200 text-sky-900 dark:bg-sky-800 dark:text-sky-100" data-i18n="promo_chip_value">Best Value</span>
              <h4 class="mt-2 text-lg font-semibold" data-i18n="promo_van_title">5T Van ‚Äî ‚Çπ22 / km</h4>
              <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="promo_van_text">Reliable transport for harvest day.</p>
            </article>
            <article class="min-w-full p-4 bg-amber-50 dark:bg-amber-900/20">
              <span class="inline-flex text-xs font-bold px-2 py-1 rounded-full bg-amber-200 text-amber-900 dark:bg-amber-800 dark:text-amber-100" data-i18n="promo_chip_fresh">Fresh PL</span>
              <h4 class="mt-2 text-lg font-semibold" data-i18n="promo_seed_title">Seeds ‚Äî Batch 1 Open</h4>
              <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="promo_seed_text">Vannamei SPF PL. Bonus up to 30%.</p>
            </article>
          </div>
          <div id="promoDots" class="absolute bottom-2 inset-x-0 flex justify-center gap-2"></div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // --- i18n ---
    const dict={
      en:{app_title:"Aquaculture A‚ÄìZ",t_home:"Home",t_harvest:"Harvest",t_seeds:"Seeds",t_dealers:"Dealers",flash_news:"Flash News",snapshot:"Live Snapshot",updated:"Updated",th_count:"Count",th_price:"Price (‚Çπ/kg)",th_change:"Change",promotions_title:"Promotions",promo_chip_today:"Today",promo_ice_title:"Ice Booking ‚Äî ‚Çπ2,400 / ton",promo_ice_text:"Factory-grade ice. Fast loading.",promo_chip_value:"Best Value",promo_van_title:"5T Van ‚Äî ‚Çπ22 / km",promo_van_text:"Reliable transport for harvest day.",promo_chip_fresh:"Fresh PL",promo_seed_title:"Seeds ‚Äî Batch 1 Open",promo_seed_text:"Vannamei SPF PL. Bonus up to 30%."},
      te:{app_title:"Aquaculture A‚ÄìZ",t_home:"‡∞π‡±ã‡∞Æ‡±ç",t_harvest:"‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç",t_seeds:"‡∞∏‡±Ä‡∞°‡±ç‡∞∏‡±ç",t_dealers:"‡∞µ‡±Ü‡∞Ç‡∞°‡∞∞‡±ç‡∞≤‡±Å",flash_news:"‡∞´‡±ç‡∞≤‡∞æ‡∞∑‡±ç ‡∞®‡±ç‡∞Ø‡±Ç‡∞∏‡±ç",snapshot:"‡∞≤‡±à‡∞µ‡±ç ‡∞∏‡±ç‡∞®‡∞æ‡∞™‡±ç‚Äå‡∞∑‡∞æ‡∞ü‡±ç",updated:"‡∞Ö‡∞™‡±ç‚Äå‡∞°‡±á‡∞ü‡±ç",th_count:"‡∞ï‡±å‡∞Ç‡∞ü‡±ç",th_price:"‡∞ß‡∞∞ (‚Çπ/kg)",th_change:"‡∞Æ‡∞æ‡∞∞‡±ç‡∞™‡±Å",promotions_title:"‡∞™‡±ç‡∞∞‡±ã‡∞Æ‡±ã‡∞∑‡∞®‡±ç‡∞∏‡±ç",promo_chip_today:"‡∞à ‡∞∞‡±ã‡∞ú‡±Å",promo_ice_title:"‡∞ê‡∞∏‡±ç ‡∞¨‡±Å‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç ‚Äî ‚Çπ2,400 / ‡∞ü‡∞®‡±ç",promo_ice_text:"‡∞´‡±ç‡∞Ø‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±Ä ‡∞ó‡±ç‡∞∞‡±á‡∞°‡±ç ‡∞ê‡∞∏‡±ç. ‡∞´‡∞æ‡∞∏‡±ç‡∞ü‡±ç ‡∞≤‡±ã‡∞°‡∞ø‡∞Ç‡∞ó‡±ç.",promo_chip_value:"‡∞¨‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞µ‡∞æ‡∞≤‡±ç‡∞Ø‡±Ç",promo_van_title:"5T ‡∞µ‡∞æ‡∞®‡±ç ‚Äî ‚Çπ22 / ‡∞ï‡∞ø‡∞Æ‡±Ä",promo_van_text:"‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞∞‡±ã‡∞ú‡±Å‡∞® ‡∞®‡∞Æ‡±ç‡∞Æ‡∞¶‡∞ó‡∞ø‡∞® ‡∞ü‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞∏‡±ç‚Äå‡∞™‡±ã‡∞∞‡±ç‡∞ü‡±ç.",promo_chip_fresh:"‡∞´‡±ç‡∞∞‡±Ü‡∞∑‡±ç PL",promo_seed_title:"‡∞∏‡±Ä‡∞°‡±ç‡∞∏‡±ç ‚Äî ‡∞¨‡±ç‡∞Ø‡∞æ‡∞ö‡±ç 1 ‡∞ì‡∞™‡±Ü‡∞®‡±ç",promo_seed_text:"‡∞µ‡∞æ‡∞®‡±ç‡∞®‡∞æ‡∞Æ‡±Ü‡∞Ø‡∞ø SPF PL. 30% ‡∞µ‡∞∞‡∞ï‡±Ç ‡∞¨‡±ã‡∞®‡∞∏‡±ç."}
    };
    function setLangUI(){
      const lang=localStorage.getItem('lang')||'te';
      document.documentElement.lang=lang;
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k=el.getAttribute('data-i18n'); if(dict[lang][k]) el.textContent=dict[lang][k];
      });
      // sync mobile dropdown & desktop buttons
      const sel=document.getElementById('langSelect'); if(sel) sel.value=lang;
    }

    // Lang handlers
    document.getElementById('langSelect').addEventListener('change',e=>{
      localStorage.setItem('lang', e.target.value); setLangUI(); loadNews();
    });
    // Desktop buttons (still available on large screens)
    document.getElementById('langEN_btn')?.addEventListener('click',()=>{localStorage.setItem('lang','en'); setLangUI(); loadNews();});
    document.getElementById('langTE_btn')?.addEventListener('click',()=>{localStorage.setItem('lang','te'); setLangUI(); loadNews();});

    // Theme
    const themeToggle=document.getElementById('themeToggle');
    const savedTheme=localStorage.getItem('theme');
    if(savedTheme==='dark'||(!savedTheme&&matchMedia('(prefers-color-scheme: dark)').matches)) document.documentElement.classList.add('dark');
    themeToggle.onclick=()=>{document.documentElement.classList.toggle('dark');localStorage.setItem('theme',document.documentElement.classList.contains('dark')?'dark':'light');};

    // Drawer
    const drawer=document.getElementById('drawer'), overlay=document.getElementById('overlay');
    const openDrawer=document.getElementById('openDrawer'), closeDrawer=document.getElementById('closeDrawer');
    function showDrawer(v){drawer.classList.toggle('open',v); overlay.classList.toggle('hidden',!v);}
    openDrawer.addEventListener('click',()=>showDrawer(true));
    closeDrawer.addEventListener('click',()=>showDrawer(false));
    overlay.addEventListener('click',()=>showDrawer(false));

    // Rates (100c ‚Üí 30c)
    function loadRates(){
      const counts=[100,90,80,70,60,50,40,30];
      const priceByCount=c=>{
        if(c===100) return 240;
        if(c===90)  return 250;
        if(c===80)  return 270;
        if(c===70)  return 290;
        if(c===60)  return 310;
        if(c===50)  return 330;
        if(c===40)  return 350;
        if(c===30)  return 370;
        return 240;
      };
      const tbody=document.querySelector('#ratesTable tbody'); tbody.innerHTML='';
      counts.forEach(c=>{
        const tr=document.createElement('tr'); tr.className='border-b last:border-0 dark:border-slate-800';
        tr.innerHTML=`<td class="py-2 pr-4 font-medium">${c}c</td>
                      <td class="py-2 pr-4">‚Çπ ${priceByCount(c)}</td>
                      <td class="py-2 pr-4">‚Äî</td>`;
        tbody.appendChild(tr);
      });
      document.getElementById('updatedAt').textContent=new Intl.DateTimeFormat('en-IN',{dateStyle:'medium',timeStyle:'short'}).format(new Date()));
    }

    // Flash News (harvest tag blink)
    const NEWS_FALLBACK={
      en:[{tag:'Rates',text:'50c steady across coastal AP'},{tag:'Seed',text:'Batch 1 PL open this week'},{tag:'Harvest',text:'Night DO risk; add aeration 8pm‚Äì3am'},{tag:'Market',text:'Ice ‚Çπ1200/ton in Nellore'}],
      te:[{tag:'‡∞∞‡±á‡∞ü‡±ç‡∞∏‡±ç',text:'50 ‡∞ï‡±å‡∞Ç‡∞ü‡±ç ‡∞ß‡∞∞ ‡∞∏‡±ç‡∞•‡∞ø‡∞∞‡∞Ç‡∞ó‡∞æ ‡∞â‡∞Ç‡∞¶‡∞ø'},{tag:'‡∞∏‡±Ä‡∞°‡±ç‡∞∏‡±ç',text:'‡∞¨‡±ç‡∞Ø‡∞æ‡∞ö‡±ç 1 PL ‡∞à ‡∞µ‡∞æ‡∞∞‡∞Ç ‡∞ì‡∞™‡±Ü‡∞®‡±ç'},{tag:'‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç',text:'‡∞∞‡∞æ‡∞§‡±ç‡∞∞‡∞ø DO ‡∞∞‡∞ø‡∞∏‡±ç‡∞ï‡±ç ‚Äî 8pm‚Äì3am ‡∞é‡∞Ø‡∞∞‡±á‡∞∑‡∞®‡±ç ‡∞™‡±Ü‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø'},{tag:'‡∞Æ‡∞æ‡∞∞‡±ç‡∞ï‡±Ü‡∞ü‡±ç',text:'‡∞®‡±Ü‡∞≤‡±ç‡∞≤‡±Ç‡∞∞‡±Å ‡∞ê‡∞∏‡±ç ‚Çπ1200/‡∞ü‡∞®‡±ç'}]
    };
    function loadNews(){
      const track=document.getElementById('newsTrackTop'); const lang=localStorage.getItem('lang')||'te';
      let items=NEWS_FALLBACK[lang];
      if(items.length<3){items=items.concat(NEWS_FALLBACK[lang]).slice(0,3);}
      const isHarvest=tag=>{const s=String(tag||'').trim().toLowerCase().replace(/\s+/g,'');return s.includes('harvest')||String(tag).includes('‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç');};
      const chip=(t,b=false)=>`<span class="px-2 py-0.5 rounded-full bg-sky-100 text-sky-700 dark:bg-sky-900/40 dark:text-sky-200 text-[11px] ${b?'blink':''}">${t}</span>`;
      const row=items.map(n=>`<div class="flex items-center gap-2 pr-4">${chip(n.tag,isHarvest(n.tag))}<span>${n.text}</span></div>`).join('');
      track.innerHTML=row+row+row;
      document.getElementById('newsUpdatedTop').textContent=new Intl.DateTimeFormat('en-IN',{dateStyle:'medium',timeStyle:'short'}).format(new Date());
    }

    // Promo slider dots
    const promoSlidesHandler=()=>{const slides=document.getElementById('promoSlides');const dots=document.getElementById('promoDots');if(!slides||!dots)return;const total=slides.children.length;let idx=0;dots.innerHTML='';for(let i=0;i<total;i++){const b=document.createElement('button');b.className='h-2 w-2 rounded-full border border-slate-400/70 bg-white/70 dark:bg-slate-800';b.onclick=()=>go(i,true);dots.appendChild(b);}dots.children[0]?.classList.add('bg-sky-400');let timer=setInterval(()=>go(idx+1),4500);function go(n,user=false){idx=(n+total)%total;slides.style.transform=`translateX(-${idx*100}%)`;[...dots.children].forEach((d,i)=>d.classList.toggle('bg-sky-400',i===idx));if(user){clearInterval(timer);timer=setInterval(()=>go(idx+1),4500);}}};

    // INIT
    (function init(){
      if(!localStorage.getItem('lang')) localStorage.setItem('lang','te');
      setLangUI();
      loadRates();
      loadNews();
      promoSlidesHandler();
      // apply saved theme handled above
    })();
  </script>
</body>
</html>
