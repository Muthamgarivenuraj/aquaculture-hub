<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Aquaculture A–Z • Home</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class',theme:{extend:{boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'}}}}</script>
  <style>
    html{scroll-behavior:smooth}
    body{background:linear-gradient(135deg,#dbeafe 0%,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0%,#082f49 50%,#14532d 100%)}
    .navbtn{border:1px solid rgb(226,232,240);padding:.75rem;border-radius:.75rem;background:#fff;text-align:center;font-weight:500}
    .dark .navbtn{background:#0b1220;border-color:#1f2937}
    .ticker{overflow:hidden;mask-image:linear-gradient(90deg,transparent,black 8%,black 92%,transparent);-webkit-mask-image:linear-gradient(90deg,transparent,black 8%,black 92%,transparent)}
    .ticker-track{display:flex;gap:24px;white-space:nowrap;min-width:max-content;animation:ticker 20s linear infinite}
    @keyframes ticker{from{transform:translateX(0)} to{transform:translateX(-50%)}}
    @media (max-width:640px){.ticker{mask-image:none;-webkit-mask-image:none}.ticker-track{gap:16px;animation-duration:28s}}
    @keyframes blink{0%,100%{opacity:1;background-color:#facc15;color:#111827}50%{opacity:1;background-color:#dc2626;color:#fff}}
    .blink{animation:blink 1.2s infinite}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Header -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
      <h1 class="text-xl font-bold flex-1" data-i18n="app_title">Aquaculture A–Z</h1>
      <nav class="hidden sm:flex gap-2">
        <a href="harvest.html" class="navbtn">🚚 <span data-i18n="t_harvest">Harvest</span></a>
        <a href="seeds.html" class="navbtn">🦐 <span data-i18n="t_seeds">Seeds</span></a>
        <a href="dealers.html" class="navbtn">🏪 <span data-i18n="t_dealers">Dealers</span></a>
      </nav>
      <div class="flex rounded-full bg-slate-100 dark:bg-slate-900 p-1 border border-slate-200 dark:border-slate-800">
        <button id="langTE" class="px-3 py-1.5 text-sm rounded-full bg-white dark:bg-slate-800 shadow-soft">తెలుగు</button>
        <button id="langEN" class="px-3 py-1.5 text-sm rounded-full">English</button>
      </div>
      <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border border-slate-200 dark:border-slate-800">🌙/☀️</button>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 space-y-4">
    <!-- Flash News -->
    <section class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold">📰 <span data-i18n="flash_news">Flash News</span></h3>
        <span class="text-xs px-2 py-1 rounded-full bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-200">Live</span>
      </div>
      <div class="mt-3 ticker"><div id="newsTrackTop" class="ticker-track"></div></div>
      <p class="text-xs text-slate-500 mt-2"><span data-i18n="updated">Updated</span>: <span id="newsUpdatedTop">—</span></p>
    </section>

    <!-- Rates + Promotions -->
    <section class="grid grid-cols-1 lg:grid-cols-2 gap-4">
      <!-- Rates -->
      <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
        <div class="flex items-center justify-between mb-2">
          <h3 class="font-semibold" data-i18n="snapshot">Live Snapshot</h3>
          <div class="flex items-center gap-2">
            <label for="prawnType" class="text-sm text-slate-600 dark:text-slate-300" data-i18n="lbl_type">Type:</label>
            <select id="prawnType" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-800 dark:border-slate-600">
              <option value="Vannamei" selected>Vannamei</option>
              <option value="Tiger">Tiger</option>
            </select>
          </div>
          <p class="text-xs text-slate-500"><span data-i18n="updated">Updated</span>: <span id="updatedAt">—</span></p>
        </div>
        <div class="mt-3 overflow-x-auto">
          <table class="min-w-full text-sm" id="ratesTable">
            <thead>
              <tr class="border-b dark:border-slate-800 text-slate-500">
                <th class="text-left py-2 pr-4" data-i18n="th_count">Count</th>
                <th class="text-left py-2 pr-4" data-i18n="th_price">Price (₹/kg)</th>
                <th class="text-left py-2 pr-4" data-i18n="th_change">Change</th>
              </tr>
            </thead><tbody></tbody>
          </table>
        </div>
      </div>

      <!-- Promotions -->
      <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
        <h3 class="font-semibold">📣 <span data-i18n="promotions_title">Promotions</span></h3>
        <p class="mt-2 text-sm text-slate-600 dark:text-slate-300" data-i18n="promo_seed_text">Vannamei SPF PL. Bonus up to 30%.</p>
      </div>
    </section>
  </main>

  <script>
    // i18n
    const dict={en:{app_title:"Aquaculture A–Z",t_harvest:"Harvest",t_seeds:"Seeds",t_dealers:"Dealers",flash_news:"Flash News",snapshot:"Live Snapshot",updated:"Updated",lbl_type:"Type",th_count:"Count",th_price:"Price (₹/kg)",th_change:"Change",promotions_title:"Promotions",promo_seed_text:"Vannamei SPF PL. Bonus up to 30%."},te:{app_title:"Aquaculture A–Z",t_harvest:"హార్వెస్ట్",t_seeds:"సీడ్స్",t_dealers:"వెండర్లు",flash_news:"ఫ్లాష్ న్యూస్",snapshot:"లైవ్ స్నాప్‌షాట్",updated:"అప్‌డేట్",lbl_type:"రకం",th_count:"కౌంట్",th_price:"ధర (₹/kg)",th_change:"మార్పు",promotions_title:"ప్రోమోషన్స్",promo_seed_text:"వాన్నామెయి SPF PL. 30% వరకూ బోనస్."}};
    function setLang(){const lang=localStorage.getItem('lang')||'te';document.documentElement.lang=lang;document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.dataset.i18n;if(dict[lang][k]) el.textContent=dict[lang][k];});}
    langEN.onclick=()=>{localStorage.setItem('lang','en');setLang();};
    langTE.onclick=()=>{localStorage.setItem('lang','te');setLang();};

    // Theme
    const themeToggle=document.getElementById('themeToggle');const savedTheme=localStorage.getItem('theme');
    if(savedTheme==='dark'||(!savedTheme&&matchMedia('(prefers-color-scheme: dark)').matches)) document.documentElement.classList.add('dark');
    themeToggle.onclick=()=>{document.documentElement.classList.toggle('dark');localStorage.setItem('theme',document.documentElement.classList.contains('dark')?'dark':'light');};

    // Rates Data
    const DATA={
      Vannamei:[{c:100,p:240},{c:90,p:250},{c:80,p:260},{c:70,p:280},{c:60,p:310},{c:50,p:330},{c:40,p:350},{c:30,p:370}],
      Tiger:[{c:50,p:330},{c:40,p:390},{c:30,p:470},{c:20,p:580}]
    };

    function renderRates(type){
      const tbody=document.querySelector('#ratesTable tbody');tbody.innerHTML='';
      (DATA[type]||[]).forEach(row=>{
        const tr=document.createElement('tr');
        tr.className='border-b last:border-0 dark:border-slate-800';
        tr.innerHTML=`<td class="py-2 pr-4 font-medium">${row.c}c</td>
                      <td class="py-2 pr-4">₹ ${row.p}</td>
                      <td class="py-2 pr-4">—</td>`;
        tbody.appendChild(tr);
      });
      updatedAt.textContent=new Intl.DateTimeFormat('en-IN',{dateStyle:'medium',timeStyle:'short'}).format(new Date());
    }

    // INIT
    (function(){
      if(!localStorage.getItem('lang')) localStorage.setItem('lang','te');
      setLang();
      const select=document.getElementById('prawnType');
      renderRates(select.value);
      select.onchange=()=>renderRates(select.value);
    })();
  </script>
</body>
</html>
