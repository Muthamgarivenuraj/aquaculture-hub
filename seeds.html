<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Seeds ‚Ä¢ Aquaculture A‚ÄìZ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={darkMode:'class',theme:{extend:{boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'}}}}
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%)}
    .field{border:1px solid rgb(226,232,240);border-radius:.5rem;padding:.5rem .6rem}
    .dark .field{background:#0b1220;border-color:#334155;color:#e2e8f0}
    .btn{padding:.6rem 1rem;border-radius:.75rem}
    .btn-primary{background:#059669;color:#fff}
    .btn-primary[disabled]{opacity:.5;cursor:not-allowed}
    .badge{font-size:.75rem;padding:.2rem .55rem;border-radius:.5rem}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center gap-3">
      <a href="index.html" class="rounded-lg px-3 py-1.5 border border-slate-200 dark:border-slate-800">‚Üê</a>
      <h1 class="text-lg font-bold flex-1" data-i18n="seed_booking">Seed Booking</h1>
      <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border border-slate-200 dark:border-slate-800">üåô/‚òÄÔ∏è</button>
    </div>
  </header>

  <main class="max-w-5xl mx-auto p-4 space-y-6">
    <!-- Selectors -->
    <div class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border space-y-4">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
        <label class="text-sm" data-i18n="state">State
          <select id="sState" class="mt-1 field w-full"></select>
        </label>
        <label class="text-sm" data-i18n="district">District
          <select id="sDistrict" class="mt-1 field w-full"></select>
        </label>
        <label class="text-sm" data-i18n="village">Village
          <select id="sVillage" class="mt-1 field w-full"></select>
        </label>
        <label class="text-sm" data-i18n="hatchery">Hatchery
          <select id="sHatchery" class="mt-1 field w-full"></select>
        </label>
      </div>
    </div>

    <!-- Booking Form (same as before, skip for brevity) -->
    <div id="bookingForm" class="hidden rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border space-y-4">
      <p>Form details here...</p>
    </div>
  </main>

  <script>
    // i18n dictionary
    const dict={
      en:{seed_booking:"Seed Booking",state:"State",district:"District",village:"Village",hatchery:"Hatchery",select:"Select"},
      te:{seed_booking:"‡∞∏‡±Ä‡∞°‡±ç‡∞∏‡±ç ‡∞¨‡±Å‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç",state:"‡∞∞‡∞æ‡∞∑‡±ç‡∞ü‡±ç‡∞∞‡∞Ç",district:"‡∞ú‡∞ø‡∞≤‡±ç‡∞≤‡∞æ",village:"‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡∞Ç",hatchery:"‡∞π‡±ç‡∞Ø‡∞æ‡∞ö‡∞∞‡±Ä",select:"‡∞é‡∞Ç‡∞ö‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø"}
    };

    function applyI18n(){
      const lang=localStorage.getItem('lang')||'te';
      document.documentElement.lang=lang;
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key=el.dataset.i18n;
        if(dict[lang][key]) el.textContent=dict[lang][key];
      });
    }

    // Theme persist
    (function(){
      const t=localStorage.getItem('theme');
      if(t==='dark'||(!t&&matchMedia('(prefers-color-scheme: dark)').matches)){
        document.documentElement.classList.add('dark');
      }
      document.getElementById("themeToggle").onclick=()=>{
        document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme',document.documentElement.classList.contains('dark')?'dark':'light');
      };
    })();

    // CSV load
    async function loadCSV(path){
      const res=await fetch(path);
      const txt=await res.text();
      return txt.trim().split("\n").slice(1).map(r=>{
        const [id,state,district,village,hatchery]=r.split(",");
        return {state,district,village,hatchery};
      });
    }

    function fillDropdown(id,items){
      const lang=localStorage.getItem('lang')||'te';
      document.getElementById(id).innerHTML=`<option value="">${dict[lang].select}</option>`+
        items.map(v=>`<option>${v}</option>`).join("");
    }

    let hatcheries=[];
    async function init(){
      hatcheries=await loadCSV("data/hatcheries.csv");
      const states=[...new Set(hatcheries.map(h=>h.state))];
      fillDropdown("sState",states);
    }

    document.addEventListener("DOMContentLoaded",()=>{
      if(!localStorage.getItem('lang')) localStorage.setItem('lang','te');
      applyI18n();
      init();
    });
  </script>
</body>
</html>
