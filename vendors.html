<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Vendors â€¢ Aquaculture Aâ€“Z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { boxShadow: { soft: '0 12px 28px rgba(2,6,23,.08)' } } }
    };
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%)}
    .btn{padding:.5rem .9rem;border-radius:.75rem;font-weight:600}
    .btn-light{background:#e0f2fe;color:#0369a1}
    .btn-light:hover{background:#bae6fd}
    .dark .btn-light{background:#1e293b;color:#38bdf8}
    .promo-dot{height:.5rem;width:.5rem;border-radius:9999px;border:1px solid currentColor;opacity:.5}
    .promo-dot.active{opacity:1;background:currentColor}
    .promo-slide{display:none}
    .promo-slide.active{display:block}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <a href="index.html" class="px-3 py-1.5 border rounded-lg">â†</a>
      <h1 class="text-lg font-bold flex-1" data-i18n="vendors_title">Vendors</h1>
      <div class="flex items-center gap-2">
        <select id="langSel" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
          <option value="te">à°¤à±†à°²à±à°—à±</option>
          <option value="en">English</option>
        </select>
        <button id="themeToggle" class="px-3 py-1.5 text-sm border rounded-lg">ğŸŒ™/â˜€ï¸</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-4 space-y-6">
    <!-- Buttons -->
    <div class="flex gap-2 justify-around">
      <button class="btn btn-light flex-1" data-i18n="feed_btn">ğŸ¥¬ Feed Dealers</button>
      <button class="btn btn-light flex-1" data-i18n="med_btn">ğŸ’Š Medicine</button>
      <button class="btn btn-light flex-1" data-i18n="tech_btn">ğŸ› ï¸ Technicians</button>
    </div>

    <!-- Promotions -->
    <section class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border">
      <h3 class="font-semibold mb-3" data-i18n="promotions">ğŸ“£ Promotions</h3>
      <div id="promoSlider" class="relative">
        <div id="promoTrack"></div>
        <div id="promoDots" class="mt-3 flex gap-2"></div>
      </div>
    </section>

    <!-- Weather Forecast -->
    <section class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border">
      <h3 class="font-semibold mb-3" data-i18n="weather">ğŸŒ¦ï¸ Weather Forecast</h3>
      <div id="weatherBox" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3"></div>
    </section>
  </main>

  <script>
    const dict={
      en:{vendors_title:"Vendors",feed_btn:"Feed Dealers",med_btn:"Medicine",tech_btn:"Technicians",promotions:"Promotions",weather:"Weather Forecast"},
      te:{vendors_title:"à°µà°¿à°•à±à°°à±‡à°¤à°²à±",feed_btn:"à°«à±€à°¡à± à°¡à±€à°²à°°à±à°²à±",med_btn:"à°®à°‚à°¦à±à°²à±",tech_btn:"à°Ÿà±†à°•à±à°¨à±€à°·à°¿à°¯à°¨à±à°²à±",promotions:"à°ªà±à°°à±‹à°®à±‹à°·à°¨à±à°¸à±",weather:"à°µà°¾à°¤à°¾à°µà°°à°£ à°¸à±‚à°šà°¨"}
    };
    function applyI18n(){
      const lang=localStorage.getItem("lang")||"te";
      document.documentElement.lang=lang;
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const k=el.dataset.i18n;
        if(dict[lang][k]) el.textContent=dict[lang][k];
      });
      document.getElementById("langSel").value=lang;
    }

    // Theme + Lang
    document.getElementById("themeToggle").onclick=()=>{document.documentElement.classList.toggle("dark");localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light");};
    document.getElementById("langSel").onchange=e=>{localStorage.setItem("lang",e.target.value);applyI18n();renderPromo();};

    // Promotions demo
    const PROMOS=[
      {title_en:"50% Off Feed",title_te:"à°«à±€à°¡à± à°ªà±ˆ 50% à°¤à°—à±à°—à°¿à°‚à°ªà±",desc_en:"Limited time offer.",desc_te:"à°ªà°°à°¿à°®à°¿à°¤ à°•à°¾à°² à°†à°«à°°à±."},
      {title_en:"Free Water Test",title_te:"à°‰à°šà°¿à°¤ à°¨à±€à°Ÿà°¿ à°ªà°°à±€à°•à±à°·",desc_en:"Book now for free.",desc_te:"à°‡à°ªà±à°ªà±à°¡à±‡ à°‰à°šà°¿à°¤à°‚à°—à°¾ à°¬à±à°•à± à°šà±‡à°¯à°‚à°¡à°¿."},
      {title_en:"Buy 1 Get 1 Medicine",title_te:"1 à°•à±Šà°¨à°‚à°¡à°¿ 1 à°‰à°šà°¿à°¤à°‚ à°®à°‚à°¦à±à°²à±",desc_en:"Special deal this week.",desc_te:"à°ˆ à°µà°¾à°°à°‚ à°ªà±à°°à°¤à±à°¯à±‡à°• à°†à°«à°°à±."}
    ];
    let promoIdx=0,timer=null;
    function renderPromo(){
      const lang=localStorage.getItem("lang")||"te";
      document.getElementById("promoTrack").innerHTML=PROMOS.map((r,i)=>`
        <div class="promo-slide ${i===promoIdx?"active":""}">
          <h4 class="text-lg font-semibold">${lang==="te"?r.title_te:r.title_en}</h4>
          <p class="text-slate-600 dark:text-slate-300">${lang==="te"?r.desc_te:r.desc_en}</p>
        </div>`).join('');
      document.getElementById("promoDots").innerHTML=PROMOS.map((_,i)=>`<button class="promo-dot ${i===promoIdx?"active":""}" data-i="${i}"></button>`).join('');
      document.querySelectorAll("#promoDots button").forEach(b=>b.onclick=()=>{promoIdx=+b.dataset.i;renderPromo();startPromo();});
    }
    function startPromo(){if(timer)clearInterval(timer);timer=setInterval(()=>{promoIdx=(promoIdx+1)%PROMOS.length;renderPromo();},5000);}
    
    // Weather forecast
    const cities=["Nellore","Chirala","Kakinada","Ongole","Amalapuram"];
    const API_KEY="806155681632c9644a953b3f78fd6707"; // ğŸ‘ˆ replace with your OpenWeather key

    async function fetchWeather(city){
      try{
        const lang=localStorage.getItem("lang")||"te";
        const res=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=${lang}`);
        const data=await res.json();
        return {
          city: city,
          temp: Math.round(data.main.temp),
          cond: data.weather[0].description,
          hum: data.main.humidity,
          wind: data.wind.speed
        };
      }catch(e){return null;}
    }

    async function renderWeather(){
      const box=document.getElementById("weatherBox");
      box.innerHTML="â³ Loading...";
      const results=await Promise.all(cities.map(c=>fetchWeather(c)));
      box.innerHTML=results.filter(r=>r).map(r=>`
        <div class="p-3 rounded-xl border bg-slate-50 dark:bg-slate-800">
          <h4 class="font-semibold">${r.city}</h4>
          <p class="text-lg">ğŸŒ¡ï¸ ${r.temp}Â°C â€” ${r.cond}</p>
          <p class="text-sm">ğŸ’§ ${r.hum}% | ğŸŒ¬ï¸ ${r.wind} m/s</p>
        </div>`).join('');
    }

    document.addEventListener("DOMContentLoaded",()=>{
      if(!localStorage.getItem("lang")) localStorage.setItem("lang","te");
      applyI18n(); renderPromo(); startPromo(); renderWeather();
      if(localStorage.getItem("theme")==="dark") document.documentElement.classList.add("dark");
    });
  </script>
</body>
</html>
