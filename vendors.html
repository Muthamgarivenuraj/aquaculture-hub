<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aquaculture A‚ÄìZ ‚Ä¢ Vendors & Culture</title>
  <meta name="description" content="Vendors directory and Prawn culture guides with Telugu/English support."/>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { darkMode:'class', theme:{ extend:{ boxShadow:{soft:'0 12px 28px rgba(2,6,23,.08)'} } } }
  </script>
  <style>
    html{scroll-behavior:smooth}
    body{background: linear-gradient(135deg,#dbeafe 0%,#e0f2fe 50%,#f0fdf4 100%);}
    .dark body{background: linear-gradient(135deg,#0f172a 0%,#082f49 50%,#14532d 100%);}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Top Bar -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
      <!-- Tiny logo -->
      <div class="h-9 w-9 rounded-xl overflow-hidden shadow-soft">
        <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" class="h-full w-full" aria-hidden="true">
          <defs><linearGradient id="g1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#34d399"/>
          </linearGradient></defs>
          <rect rx="14" ry="14" width="64" height="64" fill="url(#g1)"/>
          <g fill="#fff" opacity="0.95">
            <path d="M46 20c-6-2-13 1-17 6-4 5-5 12-1 16 4 4 10 3 14-1 3-3 4-7 3-11-4 1-8 0-11-2 4-1 8-2 12-8z"/>
            <circle cx="42" cy="24" r="2"/>
          </g>
        </svg>
      </div>
      <div>
        <h1 class="text-lg font-bold leading-tight" data-i18n="title"></h1>
        <p class="text-xs text-slate-500" data-i18n="subtitle"></p>
      </div>
      <div class="ml-auto flex items-center gap-2">
        <!-- Lang -->
        <div class="flex rounded-full bg-slate-100 dark:bg-slate-900 p-1 border border-slate-200 dark:border-slate-800">
          <button id="langTE" class="px-3 py-1.5 text-sm rounded-full bg-white dark:bg-slate-800 shadow-soft">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
          <button id="langEN" class="px-3 py-1.5 text-sm rounded-full">English</button>
        </div>
        <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border border-slate-200 dark:border-slate-800">üåô/‚òÄÔ∏è</button>
        <a href="./index.html" class="px-3 py-1.5 text-sm rounded-full border border-slate-200 dark:border-slate-800">‚Üê <span data-i18n="back_home"></span></a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto p-4 space-y-4">

    <!-- Toggle row + filters -->
    <div class="flex flex-wrap items-center gap-2">
      <!-- Toggle buttons -->
      <div class="inline-flex rounded-2xl overflow-hidden border border-slate-200 dark:border-slate-800">
        <button id="btnVendors" class="px-4 py-2 text-sm bg-emerald-600 text-white"><span data-i18n="vendors"></span></button>
        <button id="btnCulture" class="px-4 py-2 text-sm bg-white dark:bg-slate-900"><span data-i18n="culture"></span></button>
      </div>

      <!-- Filters (visible only on Vendors view) -->
      <div id="vendorFilters" class="flex items-center gap-2 ml-auto">
        <input id="dSearch" class="rounded-md border px-3 py-2 text-sm dark:bg-slate-950 dark:border-slate-800" data-i18n-placeholder="search_ph" />
        <select id="dCategory" class="rounded-md border px-2 py-2 text-sm dark:bg-slate-950 dark:border-slate-800">
          <option value="">{All}</option>
          <option>Feeds</option><option>Seeds</option><option>Medicines</option><option>Lab</option><option>Supplies</option>
        </select>
      </div>
    </div>

    <!-- Vendors section -->
    <section id="v-vendors" class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm" id="dealersTable">
          <thead>
            <tr class="border-b dark:border-slate-800 text-slate-500">
              <th class="text-left py-2 pr-4" data-i18n="th_name"></th>
              <th class="text-left py-2 pr-4" data-i18n="th_cat"></th>
              <th class="text-left py-2 pr-4" data-i18n="th_dist"></th>
              <th class="text-left py-2 pr-4" data-i18n="th_phone"></th>
              <th class="text-left py-2 pr-4">WhatsApp</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <!-- Culture section -->
    <section id="v-culture" class="hidden rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border border-slate-200/60 dark:border-slate-800">
      <h3 class="font-semibold text-lg mb-3" data-i18n="culture_title"></h3>

      <div class="divide-y divide-slate-200 dark:divide-slate-800">
        <details class="py-3" open>
          <summary class="cursor-pointer font-medium" data-i18n="c_pond_title"></summary>
          <ul class="list-disc pl-6 mt-2 text-sm leading-relaxed" id="c_pond_list"></ul>
        </details>

        <details class="py-3">
          <summary class="cursor-pointer font-medium" data-i18n="c_stock_title"></summary>
          <ul class="list-disc pl-6 mt-2 text-sm" id="c_stock_list"></ul>
        </details>

        <details class="py-3">
          <summary class="cursor-pointer font-medium" data-i18n="c_water_title"></summary>
          <ul class="list-disc pl-6 mt-2 text-sm" id="c_water_list"></ul>
        </details>

        <details class="py-3">
          <summary class="cursor-pointer font-medium" data-i18n="c_health_title"></summary>
          <ul class="list-disc pl-6 mt-2 text-sm" id="c_health_list"></ul>
        </details>

        <details class="py-3">
          <summary class="cursor-pointer font-medium" data-i18n="c_harvest_title"></summary>
          <ul class="list-disc pl-6 mt-2 text-sm" id="c_harvest_list"></ul>
        </details>
      </div>
    </section>

  </main>

  <script>
    // ---------- i18n ----------
    const dict = {
      en: {
        title:"Aquaculture A‚ÄìZ",
        subtitle:"Vendors & Culture",
        back_home:"Back",
        vendors:"Vendors",
        culture:"Prawn Culture",
        search_ph:"Search dealer/hatchery/lab‚Ä¶",
        th_name:"Name", th_cat:"Category", th_dist:"District", th_phone:"Phone",
        culture_title:"Prawn Culture ‚Äì Quick Guides",
        // Culture bullets:
        c_pond_title:"Pond Preparation (7‚Äì10 days)",
        c_pond_list:[
          "Dry pond bed; apply lime as per soil pH (target 6.5‚Äì8.5).",
          "Fill water 3‚Äì4 ft; chlorinate if needed; dechlorinate after 48 hrs.",
          "Probiotics pre-stock; check salinity, alkalinity, hardness."
        ],
        c_stock_title:"Stocking (Vannamei SPF PL)",
        c_stock_list:[
          "Acclimatize PL (temp/salinity) for 45‚Äì60 min.",
          "Density as per practice (e.g., 40‚Äì60/m¬≤ intensive).",
          "Start feed @ 4‚Äì5% biomass; adjust by tray observations."
        ],
        c_water_title:"Daily Water Quality",
        c_water_list:[
          "DO > 5 mg/L (night aeration 8pm‚Äì3am if shallow ponds).",
          "pH 7.5‚Äì8.2 (check morning/evening).",
          "Transparency 25‚Äì35 cm; stable golden/brown color."
        ],
        c_health_title:"Health & Disease",
        c_health_list:[
          "Vibriosis prevention: regular probiotics, avoid overfeeding.",
          "Lab checks weekly; histology if stress signs.",
          "Biosecurity: bird fencing, foot dips, gear sanitize."
        ],
        c_harvest_title:"Harvest & Post-Harvest",
        c_harvest_list:[
          "Plan ice & van logistics (use Harvest tab calculators).",
          "Use clean ice; rapid chilling; avoid freshwater wash in saline species."
        ]
      },
      te: {
        title:"Aquaculture A‚ÄìZ",
        subtitle:"‡∞µ‡±Ü‡∞Ç‡∞°‡∞∞‡±ç‡∞≤‡±Å & ‡∞ï‡∞≤‡±ç‡∞ö‡∞∞‡±ç",
        back_home:"‡∞§‡∞ø‡∞∞‡±Å‡∞ó‡±Å",
        vendors:"‡∞µ‡±Ü‡∞Ç‡∞°‡∞∞‡±ç‡∞≤‡±Å",
        culture:"‡∞™‡±ç‡∞∞‡∞æ‡∞®‡±ç ‡∞ï‡∞≤‡±ç‡∞ö‡∞∞‡±ç",
        search_ph:"‡∞°‡±Ä‡∞≤‡∞∞‡±ç / ‡∞π‡±ç‡∞Ø‡∞æ‡∞ö‡∞∞‡±Ä / ‡∞≤‡±ç‡∞Ø‡∞æ‡∞¨‡±ç ‡∞∏‡±Ü‡∞∞‡±ç‡∞ö‡±ç‚Ä¶",
        th_name:"‡∞™‡±á‡∞∞‡±Å", th_cat:"‡∞ï‡±á‡∞ü‡∞ó‡∞ø‡∞∞‡±Ä", th_dist:"‡∞ú‡∞ø‡∞≤‡±ç‡∞≤‡∞æ", th_phone:"‡∞´‡±ã‡∞®‡±ç",
        culture_title:"‡∞™‡±ç‡∞∞‡∞æ‡∞®‡±ç ‡∞ï‡∞≤‡±ç‡∞ö‡∞∞‡±ç ‚Äì ‡∞ï‡±ç‡∞µ‡∞ø‡∞ï‡±ç ‡∞ó‡±à‡∞°‡±ç‡∞∏‡±ç",
        // Culture bullets:
        c_pond_title:"‡∞™‡∞æ‡∞Ç‡∞°‡±ç ‡∞™‡±ç‡∞∞‡∞ø‡∞™‡∞∞‡±á‡∞∑‡∞®‡±ç (7‚Äì10 ‡∞∞‡±ã‡∞ú‡±Å‡∞≤‡±Å)",
        c_pond_list:[
          "‡∞™‡∞æ‡∞Ç‡∞°‡±ç ‡∞¨‡±Ü‡∞°‡±ç ‡∞é‡∞Ç‡∞°‡∞¨‡±Ü‡∞ü‡±ç‡∞ü‡∞ø, ‡∞Æ‡∞ü‡±ç‡∞ü‡∞ø pH ‡∞¨‡∞ü‡±ç‡∞ü‡∞ø ‡∞≤‡±à‡∞Æ‡±ç ‡∞Ö‡∞™‡±ç‡∞≤‡±à ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (‡∞≤‡∞ï‡±ç‡∞∑‡±ç‡∞Ø‡∞Ç 6.5‚Äì8.5).",
          "‡∞®‡±Ä‡∞≥‡±ç‡∞≤‡±Å 3‚Äì4 ‡∞Ö‡∞°‡±Å‡∞ó‡±Å‡∞≤ ‡∞µ‡∞∞‡∞ï‡±Å ‡∞®‡∞ø‡∞Ç‡∞™‡∞ø, ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Æ‡±à‡∞§‡±á ‡∞ï‡±ç‡∞≤‡±ã‡∞∞‡∞ø‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø; 48‡∞ó‡∞Ç. ‡∞§‡∞∞‡±ç‡∞µ‡∞æ‡∞§ ‡∞°‡±Ä‡∞ï‡±ç‡∞≤‡±ã‡∞∞‡∞ø‡∞®‡±ç.",
          "‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç‚Äå‡∞ï‡±Å ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞™‡±ç‡∞∞‡±ã‡∞¨‡∞Ø‡±ã‡∞ü‡∞ø‡∞ï‡±ç‡∞∏‡±ç; ‡∞∏‡∞æ‡∞≤‡∞ø‡∞®‡∞ø‡∞ü‡±Ä/‡∞Ü‡∞≤‡±ç‡∞ï‡∞≤‡∞ø‡∞®‡∞ø‡∞ü‡±Ä/‡∞π‡∞æ‡∞∞‡±ç‡∞°‡±ç‡∞®‡±Ü‡∞∏‡±ç ‡∞ö‡±Ü‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø."
        ],
        c_stock_title:"‡∞∏‡±ç‡∞ü‡∞æ‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç (‡∞µ‡∞®‡±ç‡∞®‡∞æ‡∞Æ‡±Ä SPF PL)",
        c_stock_list:[
          "PL ‡∞®‡±Å ‡∞ü‡±Ü‡∞Ç‡∞™‡±ç/‡∞∏‡∞æ‡∞≤‡∞ø‡∞®‡∞ø‡∞ü‡±Ä‡∞ï‡∞ø 45‚Äì60 ‡∞®‡∞ø‡∞Æ‡∞ø‡∞∑‡∞æ‡∞≤‡±Å ‡∞∏‡∞∞‡∞ø‡∞™‡∞°‡∞æ ‡∞Ö‡∞≤‡∞µ‡∞æ‡∞ü‡±Å ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.",
          "‡∞°‡±Ü‡∞®‡±ç‡∞∏‡∞ø‡∞ü‡±Ä ‡∞∏‡±ç‡∞•‡∞æ‡∞®‡∞ø‡∞ï ‡∞™‡∞¶‡±ç‡∞ß‡∞§‡∞ø ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç (‡∞â‡∞¶‡∞æ., 40‚Äì60/‡∞ö.‡∞Æ‡±Ä ‚Äì ‡∞á‡∞Ç‡∞ü‡±Ü‡∞®‡±ç‡∞∏‡∞ø‡∞µ‡±ç).",
          "‡∞´‡±Ä‡∞°‡±ç ‡∞¨‡∞Ø‡±ã‡∞Æ‡∞æ‡∞∏‡±ç ‡∞≤‡±ã 4‚Äì5% ‡∞§‡±ã ‡∞Æ‡±ä‡∞¶‡∞≤‡±Å; ‡∞ü‡±ç‡∞∞‡±á ‡∞Ö‡∞¨‡±ç‡∞ú‡∞∞‡±ç‡∞µ‡±á‡∞∑‡∞®‡±ç ‡∞¨‡∞ü‡±ç‡∞ü‡∞ø ‡∞Ö‡∞°‡±ç‡∞ú‡∞∏‡±ç‡∞ü‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø."
        ],
        c_water_title:"‡∞∞‡±ã‡∞ú‡±Å‡∞µ‡∞æ‡∞∞‡±Ä ‡∞®‡±Ä‡∞ü‡∞ø ‡∞ó‡±Å‡∞£‡∞æ‡∞≤‡±Å",
        c_water_list:[
          "DO > 5 mg/L (‡∞™‡±ä‡∞°‡∞ø ‡∞™‡∞Ç‡∞°‡±ç‡∞≤‡∞≤‡±ã ‡∞∞‡∞æ‡∞§‡±ç‡∞∞‡∞ø 8‚Äì3 ‡∞ó‡∞Ç‡∞ü‡∞≤ ‡∞µ‡∞∞‡∞ï‡±Å ‡∞é‡∞∞‡±á‡∞∑‡∞®‡±ç).",
          "pH 7.5‚Äì8.2 (‡∞â‡∞¶‡∞Ø‡∞Ç/‡∞∏‡∞æ‡∞Ø‡∞Ç‡∞§‡±ç‡∞∞‡∞Ç ‡∞ö‡±Ü‡∞ï‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø).",
          "‡∞ü‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞∏‡±ç‚Äå‡∞™‡∞∞‡±Ü‡∞®‡±ç‡∞∏‡±Ä 25‚Äì35 ‡∞∏‡±Ü‡∞Ç.‡∞Æ‡±Ä; ‡∞∏‡±ç‡∞•‡∞ø‡∞∞‡∞Æ‡±à‡∞® ‡∞ó‡±ã‡∞≤‡±ç‡∞°‡±Ü‡∞®‡±ç/‡∞¨‡±ç‡∞∞‡±å‡∞®‡±ç ‡∞ï‡∞≤‡∞∞‡±ç."
        ],
        c_health_title:"‡∞π‡±Ü‡∞≤‡±ç‡∞§‡±ç & ‡∞°‡∞ø‡∞∏‡±Ä‡∞ú‡±ç",
        c_health_list:[
          "‡∞µ‡∞ø‡∞¨‡±ç‡∞∞‡∞ø‡∞Ø‡±ã‡∞∏‡∞ø‡∞∏‡±ç ‡∞®‡∞ø‡∞µ‡∞æ‡∞∞‡∞£: ‡∞∞‡±Ü‡∞ó‡±ç‡∞Ø‡±Å‡∞≤‡∞∞‡±ç ‡∞™‡±ç‡∞∞‡±ã‡∞¨‡∞Ø‡±ã‡∞ü‡∞ø‡∞ï‡±ç‡∞∏‡±ç, ‡∞ì‡∞µ‡∞∞‡±ç‚Äå‡∞´‡±Ä‡∞°‡∞ø‡∞Ç‡∞ó‡±ç ‡∞µ‡∞¶‡±ç‡∞¶‡±Å.",
          "‡∞™‡±ç‡∞∞‡∞§‡∞ø ‡∞µ‡∞æ‡∞∞‡∞Ç ‡∞≤‡±ç‡∞Ø‡∞æ‡∞¨‡±ç ‡∞ö‡±Ü‡∞ï‡±ç; ‡∞∏‡±ç‡∞ü‡±ç‡∞∞‡±Ü‡∞∏‡±ç ‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞æ‡∞≤‡∞™‡±à ‡∞π‡∞ø‡∞∏‡±ç‡∞ü‡∞æ‡∞≤‡∞ú‡±Ä.",
          "‡∞¨‡∞Ø‡±ã‡∞∏‡±Ü‡∞ï‡±ç‡∞Ø‡±Ç‡∞∞‡∞ø‡∞ü‡±Ä: ‡∞™‡∞ï‡±ç‡∞∑‡∞ø ‡∞ú‡∞æ‡∞≤‡∞∞‡±ç‡∞≤‡±Å, ‡∞´‡±Å‡∞ü‡±ç ‡∞°‡∞ø‡∞™‡±ç‡∞∏‡±ç, ‡∞∏‡∞æ‡∞Æ‡∞ó‡±ç‡∞∞‡∞ø ‡∞∂‡±Å‡∞≠‡±ç‡∞∞‡∞™‡∞∞‡∞ö‡∞°‡∞Ç."
        ],
        c_harvest_title:"‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç & ‡∞™‡±ã‡∞∏‡±ç‡∞ü‡±ç-‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç",
        c_harvest_list:[
          "‡∞ê‡∞∏‡±ç & ‡∞µ‡∞æ‡∞®‡±ç ‡∞≤‡∞æ‡∞ú‡∞ø‡∞∏‡±ç‡∞ü‡∞ø‡∞ï‡±ç‡∞∏‡±ç ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å‡∞ó‡∞æ‡∞®‡±á ‡∞™‡±ç‡∞≤‡∞æ‡∞®‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø (‡∞π‡∞æ‡∞∞‡±ç‡∞µ‡±Ü‡∞∏‡±ç‡∞ü‡±ç ‡∞ü‡±ç‡∞Ø‡∞æ‡∞¨‡±ç ‡∞ï‡±Ü‡∞≤‡±ç‡∞ï‡±Å‡∞≤‡±á‡∞ü‡∞∞‡±ç‡∞∏‡±ç ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø).",
          "‡∞∂‡±Å‡∞≠‡±ç‡∞∞‡∞Æ‡±à‡∞® ‡∞ê‡∞∏‡±ç; ‡∞µ‡±á‡∞ó‡∞Ç‡∞ó‡∞æ ‡∞ö‡∞≤‡±ç‡∞≤‡∞¨‡∞∞‡∞ö‡∞°‡∞Ç; ‡∞∏‡∞æ‡∞≤‡±à‡∞®‡±ç ‡∞∏‡±ç‡∞™‡±Ä‡∞∏‡±Ä‡∞∏‡±ç‚Äå‡∞ï‡∞ø ‡∞´‡±ç‡∞∞‡±Ü‡∞∑‡±ç ‡∞µ‡∞æ‡∞ü‡∞∞‡±ç ‡∞µ‡∞æ‡∞∑‡±ç ‡∞§‡∞™‡±ç‡∞™‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø."
        ]
      }
    };

    function setLangTexts(){
      const L = dict[localStorage.getItem('lang') || 'te'];
      document.documentElement.lang = (localStorage.getItem('lang')||'te');
      document.querySelectorAll('[data-i18n]').forEach(el=>{
        const k = el.getAttribute('data-i18n'); el.textContent = L[k] ?? '';
      });
      // placeholders
      const ph = document.querySelector('[data-i18n-placeholder="search_ph"]');
      if (ph) ph.placeholder = L.search_ph;

      // culture lists
      function fillList(id, arr){ const ul=document.getElementById(id); if(!ul) return; ul.innerHTML= (arr||[]).map(x=>`<li>${x}</li>`).join(''); }
      fillList('c_pond_list',   L.c_pond_list);
      fillList('c_stock_list',  L.c_stock_list);
      fillList('c_water_list',  L.c_water_list);
      fillList('c_health_list', L.c_health_list);
      fillList('c_harvest_list',L.c_harvest_list);
    }

    // ---------- Theme ----------
    const themeToggle = document.getElementById('themeToggle');
    const savedTheme = localStorage.getItem('theme');
    if(savedTheme==='dark'||(!savedTheme&&matchMedia('(prefers-color-scheme: dark)').matches)){
      document.documentElement.classList.add('dark');
    }
    themeToggle.addEventListener('click',()=>{
      document.documentElement.classList.toggle('dark');
      localStorage.setItem('theme', document.documentElement.classList.contains('dark')?'dark':'light');
    });

    // ---------- Toggle Views ----------
    const btnVendors = document.getElementById('btnVendors');
    const btnCulture = document.getElementById('btnCulture');
    const secVendors = document.getElementById('v-vendors');
    const secCulture = document.getElementById('v-culture');
    const vendorFilters = document.getElementById('vendorFilters');

    function showVendors(){
      btnVendors.classList.add('bg-emerald-600','text-white');
      btnCulture.classList.remove('bg-emerald-600','text-white');
      btnCulture.classList.add('bg-white','dark:bg-slate-900');
      secVendors.classList.remove('hidden');
      secCulture.classList.add('hidden');
      vendorFilters.classList.remove('hidden');
    }
    function showCulture(){
      btnCulture.classList.add('bg-emerald-600','text-white');
      btnVendors.classList.remove('bg-emerald-600','text-white');
      btnVendors.classList.add('bg-white','dark:bg-slate-900');
      secCulture.classList.remove('hidden');
      secVendors.classList.add('hidden');
      vendorFilters.classList.add('hidden');
    }
    btnVendors.addEventListener('click', showVendors);
    btnCulture.addEventListener('click', showCulture);

    // ---------- Dealers Load + Filter ----------
    async function loadDealers(){
      const demo=[ // fallback demo
        {name:'Sri Venkateswara Feeds',cat:'Feeds',district:'Nellore',phone:'+91 98765 43210',wa:'+919876543210'},
        {name:'Blue Aqua Hatchery',cat:'Seeds',district:'Nellore',phone:'+91 91234 56780',wa:'+919123456780'},
        {name:'Godavari Aqua Care',cat:'Medicines',district:'East Godavari',phone:'+91 90000 11122',wa:'+919000011122'},
        {name:'Krishna Aqua Mart',cat:'Supplies',district:'Krishna',phone:'+91 90123 45678',wa:'+919012345678'}
      ];
      try{
        const res=await fetch('./dealers.csv',{cache:'no-store'});
        if(!res.ok) throw new Error('no csv');
        const csv=await res.text();
        const rows=csv.trim().split(/\r?\n/).map(r=>r.split(','));
        const h=rows[0].map(x=>x.trim().toLowerCase());
        const iN=h.indexOf('name'), iC=h.indexOf('category'), iD=h.indexOf('district'), iP=h.indexOf('phone'), iW=h.indexOf('whatsapp');
        const data=rows.slice(1).map(r=>({name:r[iN],cat:r[iC],district:r[iD],phone:r[iP],wa:r[iW]}));
        renderDealers(data.filter(d=>d.name));
      }catch(e){ renderDealers(demo); }
    }
    function renderDealers(rows){
      const q=document.getElementById('dSearch'), cat=document.getElementById('dCategory'), tbody=document.querySelector('#dealersTable tbody');
      function draw(){
        const term=(q.value||'').toLowerCase();
        const filtered=rows.filter(r=>(!cat.value||r.cat===cat.value)&& (r.name.toLowerCase().includes(term)||r.district.toLowerCase().includes(term)||r.cat.toLowerCase().includes(term)));
        tbody.innerHTML='';
        filtered.forEach(d=>{
          const tr=document.createElement('tr'); tr.className='border-b last:border-0 dark:border-slate-800';
          tr.innerHTML=`<td class='py-2 pr-4'>${d.name}</td>
                        <td class='py-2 pr-4'>${d.cat}</td>
                        <td class='py-2 pr-4'>${d.district}</td>
                        <td class='py-2 pr-4'><a class='underline' href='tel:${d.phone}'>${d.phone}</a></td>
                        <td class='py-2 pr-4'><a class='px-2 py-1 rounded-md bg-emerald-600 text-white' target='_blank' href='https://wa.me/${d.wa}?text=${encodeURIComponent('Hi, I need aqua supplies.')}'>Chat</a></td>`;
          tbody.appendChild(tr);
        });
      }
      q.oninput=cat.onchange=draw; draw();
    }

    // ---------- Language buttons ----------
    document.getElementById('langEN').addEventListener('click',()=>{localStorage.setItem('lang','en'); setLangTexts();});
    document.getElementById('langTE').addEventListener('click',()=>{localStorage.setItem('lang','te'); setLangTexts();});

    // ---------- INIT ----------
    (function init(){
      if(!localStorage.getItem('lang')) localStorage.setItem('lang','te');
      setLangTexts(); showVendors(); loadDealers();
    })();
  </script>
</body>
</html>
