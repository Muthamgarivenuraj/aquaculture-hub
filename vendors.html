<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>వెండర్లు • Aquaculture A–Z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={darkMode:'class',theme:{extend:{}}}
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0%,#e0f2fe 50%,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%)}
    .promo-slide{display:none;position:relative}
    .promo-slide.active{display:block}
    .promo-text{position:absolute;bottom:0;left:0;right:0;padding:1rem;
      background:linear-gradient(transparent,rgba(0,0,0,0.7));
      color:#fff;border-radius:0 0 1rem 1rem}
    .promo-dot{height:.6rem;width:.6rem;border-radius:9999px;border:1px solid currentColor;opacity:.5}
    .promo-dot.active{opacity:1;background:currentColor}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Header -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <a href="index.html" class="rounded-lg px-3 py-1.5 border border-slate-300 dark:border-slate-700">←</a>
        <h1 class="text-lg font-bold">వెండర్లు</h1>
      </div>
      <div class="flex gap-2 items-center">
        <select id="langSel" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
          <option value="te">తెలుగు</option>
          <option value="en">English</option>
        </select>
        <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border">🌙/☀️</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-4 space-y-6">
    <!-- 🌟 Image Ads Carousel -->
    <section class="rounded-2xl overflow-hidden shadow border bg-white dark:bg-slate-900">
      <div id="promoTrack" class="relative">
        <!-- slides will render here -->
      </div>
      <div id="promoDots" class="flex justify-center gap-2 p-2"></div>
    </section>

    <!-- Vendors buttons -->
    <div class="hidden sm:flex gap-3 justify-center">
      <button class="px-4 py-2 rounded-lg bg-sky-200 dark:bg-sky-800">🌿 Feed Dealers</button>
      <button class="px-4 py-2 rounded-lg bg-rose-200 dark:bg-rose-800">💊 Medicine</button>
      <button class="px-4 py-2 rounded-lg bg-emerald-200 dark:bg-emerald-800">👨‍🔧 Technicians</button>
    </div>
    <div class="sm:hidden flex gap-2 justify-around">
      <button class="px-3 py-1 rounded-lg bg-sky-200 dark:bg-sky-800">🌿 Feed</button>
      <button class="px-3 py-1 rounded-lg bg-rose-200 dark:bg-rose-800">💊 Medicine</button>
      <button class="px-3 py-1 rounded-lg bg-emerald-200 dark:bg-emerald-800">👨‍🔧 Tech</button>
    </div>

    <!-- Dummy content -->
    <section class="p-4 rounded-xl bg-white dark:bg-slate-900 border">
      <h2 class="font-bold">📦 Vendors List</h2>
      <p class="text-sm text-slate-600 dark:text-slate-300">Feed, Medicine & Technician details will load here...</p>
    </section>
  </main>

<script>
const API_PROMOS="data/vendors_promos.csv"; 
let PROMOS=[],promoIdx=0,timer=null;

async function loadCSV(url){
  try{const res=await fetch(url);const txt=await res.text();
    return txt.trim().split("\n").slice(1).map(r=>{
      const [id,title_en,title_te,desc_en,desc_te,img]=r.split(",");
      return {title_en, title_te, desc_en, desc_te, img};
    });
  }catch(e){return [];}
}

function renderPromo(){
  const lang=localStorage.getItem("lang")||"te";
  const track=document.getElementById("promoTrack");
  const dots=document.getElementById("promoDots");
  track.innerHTML=PROMOS.map((r,i)=>`
    <div class="promo-slide ${i===promoIdx?'active':''}">
      <img src="${r.img}" class="w-full h-52 sm:h-72 object-cover"/>
      <div class="promo-text">
        <h3 class="text-lg font-bold">${lang==='te'?(r.title_te||r.title_en):r.title_en}</h3>
        <p class="text-sm">${lang==='te'?(r.desc_te||r.desc_en):r.desc_en}</p>
      </div>
    </div>`).join('');
  dots.innerHTML=PROMOS.map((_,i)=>`<button class="promo-dot ${i===promoIdx?'active':''}" data-i="${i}"></button>`).join('');
  dots.querySelectorAll('button').forEach(b=>b.onclick=()=>{promoIdx=+b.dataset.i;renderPromo();startPromo();});
}
function startPromo(){if(timer)clearInterval(timer);timer=setInterval(()=>{promoIdx=(promoIdx+1)%PROMOS.length;renderPromo();},5000);}

document.addEventListener("DOMContentLoaded",async()=>{
  if(!localStorage.getItem("lang"))localStorage.setItem("lang","te");
  if(localStorage.getItem("theme")==="dark")document.documentElement.classList.add("dark");
  document.getElementById("themeToggle").onclick=()=>{document.documentElement.classList.toggle("dark");localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light");};
  document.getElementById("langSel").onchange=e=>{localStorage.setItem("lang",e.target.value);renderPromo();};

  PROMOS=await loadCSV(API_PROMOS);
  renderPromo();startPromo();
});
</script>
</body>
</html>
