<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <meta name="google" content="notranslate"/> <!-- ✅ Prevent Google Translate bar -->
  <title>Vendors • Aquaculture A–Z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config={darkMode:'class',theme:{extend:{}}}
  </script>
  <style>
    body{background:linear-gradient(135deg,#dbeafe 0,#f0fdf4 100%)}
    .dark body{background:linear-gradient(135deg,#0f172a 0,#14532d 100%)}
    .btn-tab{padding:.6rem 1rem;border-radius:.75rem;font-weight:600}
    .btn-tab.active{border:2px solid #2563eb}
    .promo-slide{display:none}
    .promo-slide.active{display:block}
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">

  <!-- Header -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/80 border-b border-slate-200 dark:border-slate-800">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between gap-3">
      <a href="index.html" class="rounded-lg px-3 py-1.5 border border-slate-200 dark:border-slate-800">←</a>
      <h1 class="text-lg font-bold flex-1" data-i18n="vendors_title">విక్రేతలు</h1>

      <!-- Desktop Tabs -->
      <div class="hidden sm:flex gap-2">
        <button class="btn-tab bg-blue-100 dark:bg-blue-900" data-i18n="btn_feed" data-tab="feed">🌿 ఫీడ్ డీలర్లు</button>
        <button class="btn-tab bg-pink-100 dark:bg-pink-900" data-i18n="btn_medicine" data-tab="medicine">💊 మందులు</button>
        <button class="btn-tab bg-green-100 dark:bg-green-900" data-i18n="btn_tech" data-tab="tech">👨‍🔧 టెక్నీషియన్లు</button>
      </div>

      <!-- Language + Theme -->
      <div class="flex items-center gap-2">
        <select id="langSel" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
          <option value="te">తెలుగు</option>
          <option value="en">English</option>
        </select>
        <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border">🌙/☀️</button>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto p-4 space-y-6">
    <!-- Mobile Tabs -->
    <div class="flex sm:hidden gap-2 justify-around">
      <button class="btn-tab bg-blue-100 dark:bg-blue-900 flex-1" data-i18n="btn_feed_mob" data-tab="feed">🌿 Feed</button>
      <button class="btn-tab bg-pink-100 dark:bg-pink-900 flex-1" data-i18n="btn_medicine" data-tab="medicine">💊 Medicine</button>
      <button class="btn-tab bg-green-100 dark:bg-green-900 flex-1" data-i18n="btn_tech_mob" data-tab="tech">👨‍🔧 Tech</button>
    </div>

    <!-- Promotions -->
    <section>
      <h2 class="font-bold text-lg mb-2">📣 <span data-i18n="promotions">ప్రోమోషన్స్</span></h2>
      <div id="promoSlider" class="relative">
        <div id="promoTrack"></div>
        <div id="promoDots" class="mt-2 flex gap-2"></div>
      </div>
    </section>

    <!-- Weather -->
    <section>
      <h2 class="font-bold text-lg mb-2">🌤 <span data-i18n="weather">వాతావరణ సూచన</span></h2>
      <div id="weatherBox" class="p-4 rounded-xl bg-white dark:bg-slate-800 shadow"></div>
    </section>
  </main>

  <script>
    const API_KEY="dd76809d5e71a15ca87c39247f74c349"; // ✅ Your key
    const $id=s=>document.getElementById(s);

    const dict={
      en:{vendors_title:"Vendors",btn_feed:"🌿 Feed Dealers",btn_medicine:"💊 Medicine",btn_tech:"👨‍🔧 Technicians",
          btn_feed_mob:"🌿 Feed",btn_tech_mob:"👨‍🔧 Tech",promotions:"Promotions",weather:"Weather Forecast"},
      te:{vendors_title:"విక్రేతలు",btn_feed:"🌿 ఫీడ్ డీలర్లు",btn_medicine:"💊 మందులు",btn_tech:"👨‍🔧 టెక్నీషియన్లు",
          btn_feed_mob:"🌿 ఫీడ్",btn_tech_mob:"👨‍🔧 టెక్",promotions:"ప్రోమోషన్స్",weather:"వాతావరణ సూచన"}
    };

    function applyI18n(){const lang=localStorage.getItem("lang")||"te";
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const k=el.dataset.i18n;if(dict[lang][k]) el.textContent=dict[lang][k];
      });
      $id("langSel").value=lang;
    }

    // Promotions
    const PROMOS=[
      {title_en:"1 Cr worth Feed",desc_en:"Offer this week",title_te:"1 కోటి విలువైన ఫీడ్",desc_te:"ఈ వారం ఆఫర్"},
      {title_en:"Buy 1 Get 1 Medicine",desc_en:"Special offer",title_te:"ఒకటి కొంటే ఒకటి ఉచితం మందులు",desc_te:"ప్రత్యేక ఆఫర్"}
    ];
    let promoIdx=0,timer=null;
    function renderPromo(){
      const lang=localStorage.getItem("lang")||"te";
      const track=$id("promoTrack"),dots=$id("promoDots");
      track.innerHTML=PROMOS.map((r,i)=>`
        <div class="promo-slide p-4 rounded-xl bg-blue-50 dark:bg-slate-700 ${i===promoIdx?'active':''}">
          <h3 class="font-bold">${lang==='te'?r.title_te:r.title_en}</h3>
          <p>${lang==='te'?r.desc_te:r.desc_en}</p>
        </div>`).join('');
      dots.innerHTML=PROMOS.map((_,i)=>`<button class="w-2 h-2 rounded-full ${i===promoIdx?'bg-blue-600':'bg-slate-400'}" data-i="${i}"></button>`).join('');
      dots.querySelectorAll("button").forEach(b=>b.onclick=()=>{promoIdx=+b.dataset.i;renderPromo();startPromo();});
    }
    function startPromo(){if(timer)clearInterval(timer);timer=setInterval(()=>{promoIdx=(promoIdx+1)%PROMOS.length;renderPromo();},5000);}

    // Weather
    async function loadWeather(){
      try{
        const res=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Nellore,AP,IN&appid=${API_KEY}&units=metric`);
        if(!res.ok) throw new Error("API error");
        const d=await res.json();
        $id("weatherBox").innerHTML=`<b>${d.name}</b>: ${d.weather[0].description}, 🌡️ ${d.main.temp}°C, 💧 ${d.main.humidity}%`;
      }catch(e){
        $id("weatherBox").innerHTML=`<span class="text-amber-600">⚠️ Weather unavailable</span>`;
      }
    }

    // Init
    document.addEventListener("DOMContentLoaded",()=>{
      if(localStorage.getItem("theme")==="dark")document.documentElement.classList.add("dark");
      $id("themeToggle").onclick=()=>{document.documentElement.classList.toggle("dark");
        localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light");};
      if(!localStorage.getItem("lang")) localStorage.setItem("lang","te");
      applyI18n();
      $id("langSel").onchange=e=>{localStorage.setItem("lang",e.target.value);applyI18n();renderPromo();};
      renderPromo();startPromo();loadWeather();
    });
  </script>
</body>
</html>
