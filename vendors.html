<!DOCTYPE html>
<html lang="te">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Vendors â€¢ Aquaculture Aâ€“Z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: { extend: { boxShadow: { soft: '0 12px 28px rgba(2,6,23,.08)' } } }
    }
  </script>
  <style>
    body { background: linear-gradient(135deg,#dbeafe 0,#e0f2fe 50%,#f0fdf4 100%); }
    .dark body { background: linear-gradient(135deg,#0f172a 0,#082f49 50%,#14532d 100%); }
    .btn-tab { padding:0.45rem 0.8rem; border-radius:0.65rem; font-weight:600; font-size:0.9rem; white-space:nowrap; }
    .promo-slide { display:none; }
    .promo-slide.active { display:block; }
    .promo-dot { height:.6rem;width:.6rem;border-radius:9999px;border:1px solid currentColor;opacity:.5 }
    .promo-dot.active { opacity:1; background:currentColor }
  </style>
</head>
<body class="text-slate-900 dark:text-slate-100">
  <!-- Header -->
  <header class="sticky top-0 z-30 backdrop-blur bg-white/80 dark:bg-slate-950/70 border-b dark:border-slate-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3 flex-wrap justify-between">
      <div class="flex items-center gap-2">
        <a href="index.html" class="rounded-lg px-3 py-1.5 border border-slate-300 dark:border-slate-700">â†</a>
        <h1 class="text-lg font-bold" data-i18n="vendors_title">à°µà±†à°‚à°¡à°°à±à°²à±</h1>
      </div>
      <!-- Desktop Buttons -->
      <div class="hidden sm:flex gap-2">
        <button class="btn-tab bg-blue-100 dark:bg-blue-900" data-tab="feed">ğŸŒ¿ <span data-i18n="feed">Feed</span></button>
        <button class="btn-tab bg-rose-100 dark:bg-rose-900" data-tab="medicine">ğŸ’Š <span data-i18n="medicine">Medicine</span></button>
        <button class="btn-tab bg-green-100 dark:bg-green-900" data-tab="technicians">ğŸ‘©â€ğŸ”¬ <span data-i18n="technicians">Technicians</span></button>
      </div>
      <!-- Lang + Theme -->
      <div class="flex gap-2 items-center">
        <select id="langSel" class="text-sm border rounded-md px-2 py-1 dark:bg-slate-900 dark:border-slate-700">
          <option value="te">à°¤à±†à°²à±à°—à±</option>
          <option value="en">English</option>
        </select>
        <button id="themeToggle" class="rounded-full px-3 py-1.5 text-sm border dark:border-slate-700">ğŸŒ™/â˜€ï¸</button>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto p-4 space-y-6">
    <!-- Mobile Buttons -->
    <div class="flex sm:hidden gap-2 justify-around">
      <button class="btn-tab bg-blue-100 dark:bg-blue-900 flex-1 text-center" data-tab="feed">ğŸŒ¿ <span data-i18n="feed">Feed</span></button>
      <button class="btn-tab bg-rose-100 dark:bg-rose-900 flex-1 text-center" data-tab="medicine">ğŸ’Š <span data-i18n="medicine">Medicine</span></button>
      <button class="btn-tab bg-green-100 dark:bg-green-900 flex-1 text-center" data-tab="technicians">ğŸ‘©â€ğŸ”¬ <span data-i18n="technicians">Technicians</span></button>
    </div>

    <!-- Ads Section -->
    <section id="adsSection" class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border">
      <div id="promoTrack" class="relative"></div>
      <div id="promoDots" class="mt-3 flex gap-2 justify-center"></div>
    </section>

    <!-- Weather -->
    <section class="rounded-2xl p-4 bg-white dark:bg-slate-900 shadow-soft border">
      <h3 class="font-semibold mb-2">ğŸŒ¤ï¸ <span data-i18n="weather">à°µà°¾à°¤à°¾à°µà°°à°£ à°¸à±‚à°šà°¨</span></h3>
      <div id="weatherBox" class="text-sm">Loading weather...</div>
    </section>
  </main>

  <script>
    const dict = {
      en:{vendors_title:"Vendors",feed:"Feed",medicine:"Medicine",technicians:"Technicians",weather:"Weather Forecast"},
      te:{vendors_title:"à°µà±†à°‚à°¡à°°à±à°²à±",feed:"à°«à±€à°¡à±",medicine:"à°®à°‚à°¦à±à°²à±",technicians:"à°Ÿà±†à°•à±à°¨à±€à°·à°¿à°¯à°¨à±à°²à±",weather:"à°µà°¾à°¤à°¾à°µà°°à°£ à°¸à±‚à°šà°¨"}
    };

    function applyI18n(){
      const lang = localStorage.getItem("lang")||"te";
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const key=el.dataset.i18n;
        if(dict[lang][key]) el.textContent=dict[lang][key];
      });
      document.getElementById("langSel").value=lang;
    }

    // Theme
    if(localStorage.getItem("theme")==="dark") document.documentElement.classList.add("dark");
    document.getElementById("themeToggle").onclick=()=>{
      document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme",document.documentElement.classList.contains("dark")?"dark":"light");
    };
    document.getElementById("langSel").onchange=(e)=>{localStorage.setItem("lang",e.target.value);applyI18n();renderPromo();};

    // Promotions data
    const PROMOS={
      feed:[
        {img:"assets/feed1.jpg",title_en:"Premium Shrimp Feed",title_te:"à°‰à°¤à±à°¤à°® à°«à±€à°¡à±",desc_en:"Available in Nellore",desc_te:"à°¨à±†à°²à±à°²à±‚à°°à±à°²à±‹ à°²à°­à°¿à°¸à±à°¤à±à°‚à°¦à°¿"},
        {img:"assets/feed2.jpg",title_en:"Costal Aqua Feed",title_te:"à°•à±‹à°¸à±à°Ÿà°²à± à°†à°•à±à°µà°¾ à°«à±€à°¡à±",desc_en:"Special discount this week",desc_te:"à°ˆ à°µà°¾à°°à°‚ à°ªà±à°°à°¤à±à°¯à±‡à°• à°†à°«à°°à±"}
      ],
      medicine:[
        {img:"assets/med1.jpg",title_en:"Royal Aqua Medicine",title_te:"à°°à°¾à°¯à°²à± à°®à°‚à°¦à±",desc_en:"Pond health care",desc_te:"à°ªà°¾à°‚à°¡à± à°¹à±†à°²à±à°¤à± à°•à±‡à°°à±"},
        {img:"assets/med2.jpg",title_en:"Shrimp Immunity Boost",title_te:"à°¶à±à°°à°¿à°‚à°ªà± à°‡à°®à±à°¯à±‚à°¨à°¿à°Ÿà±€ à°¬à±‚à°¸à±à°Ÿà±",desc_en:"100% organic",desc_te:"100% à°¸à±‡à°‚à°¦à±à°°à±€à°¯"}
      ],
      technicians:[
        {img:"assets/tech1.jpg",title_en:"Expert Technician Support",title_te:"à°¨à°¿à°ªà±à°£à±à°² à°Ÿà±†à°•à±à°¨à±€à°·à°¿à°¯à°¨à±",desc_en:"24/7 service",desc_te:"24/7 à°¸à±‡à°µ"},
        {img:"assets/tech2.jpg",title_en:"Prawn Health Check",title_te:"à°ªà±€à°¤à°² à°†à°°à±‹à°—à±à°¯ à°¤à°¨à°¿à°–à±€",desc_en:"On-site inspection",desc_te:"à°¸à±ˆà°Ÿà± à°²à±‹ à°¤à°¨à°¿à°–à±€"}
      ]
    };

    let promoIdx=0,timer=null,currentTab="feed";
    function renderPromo(){
      const lang=localStorage.getItem("lang")||"te";
      const track=document.getElementById("promoTrack"),dots=document.getElementById("promoDots");
      const list=PROMOS[currentTab];
      track.innerHTML=list.map((r,i)=>`
        <div class="promo-slide ${i===promoIdx?'active':''}">
          <div class="relative rounded-xl overflow-hidden">
            <img src="${r.img}" class="w-full h-48 object-cover">
            <div class="absolute inset-0 bg-black/40 flex flex-col justify-end p-4 text-white">
              <h4 class="text-lg font-bold">${lang==="te"?r.title_te:r.title_en}</h4>
              <p>${lang==="te"?r.desc_te:r.desc_en}</p>
            </div>
          </div>
        </div>`).join('');
      dots.innerHTML=list.map((_,i)=>`<button class="promo-dot ${i===promoIdx?'active':''}" data-i="${i}"></button>`).join('');
      dots.querySelectorAll("button").forEach(b=>b.onclick=()=>{promoIdx=+b.dataset.i;renderPromo();startPromo();});
    }
    function startPromo(){if(timer) clearInterval(timer);timer=setInterval(()=>{promoIdx=(promoIdx+1)%PROMOS[currentTab].length;renderPromo();},5000);}
    document.querySelectorAll("[data-tab]").forEach(b=>b.onclick=()=>{currentTab=b.dataset.tab;promoIdx=0;renderPromo();startPromo();});

    // Weather
    const API_KEY="dd76809d5e71a15ca87c39247f74c349";
    async function loadWeather(){
      try{
        const res=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Nellore&appid=${API_KEY}&units=metric&lang=te`);
        const d=await res.json();
        document.getElementById("weatherBox").innerHTML=`ğŸŒ¡ï¸ ${d.main.temp}Â°C, ${d.weather[0].description}<br>ğŸ’¨ ${d.wind.speed} m/s`;
      }catch{document.getElementById("weatherBox").textContent="âš ï¸ Weather unavailable";}
    }

    document.addEventListener("DOMContentLoaded",()=>{if(!localStorage.getItem("lang")) localStorage.setItem("lang","te");applyI18n();renderPromo();startPromo();loadWeather();});
  </script>
</body>
</html>
