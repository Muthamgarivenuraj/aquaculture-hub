<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ice Booking</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
<style>
  :root{--bg:#f6f8fb;--text:#0b1220;--muted:#5f6b85;--border:#e5e7ef;--brand:#1e66f5}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Arial}
  .container{max-width:680px;margin:0 auto;padding:16px}
  header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
  .logo{font-weight:800;font-size:1.3rem}
  a.back{padding:8px 14px;border:1px solid var(--border);border-radius:10px;text-decoration:none;color:var(--text)}
  .card{background:#fff;border:1px solid var(--border);border-radius:16px;padding:14px;margin:10px 0}
  label{display:block;margin:8px 0 4px;color:#334155;font-weight:600}
  select,input,textarea{width:100%;padding:13px;border:1px solid var(--border);border-radius:12px;font-size:1rem;font-weight:600;background:#fff}
  textarea{min-height:84px;font-weight:500}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .kpi{display:flex;justify-content:space-between;align-items:center;padding:10px 12px;border-top:1px dashed var(--border);font-weight:700}
  .total{font-size:1.1rem}
  .btn{display:inline-flex;justify-content:center;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;border:1px solid var(--brand);background:var(--brand);color:#fff;font-weight:800;text-decoration:none;width:100%}
  .btn:disabled{opacity:.5;pointer-events:none}
  footer{text-align:center;margin:18px 0;color:var(--muted);font-size:.85rem}
  @media(max-width:640px){ .row{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo" data-i18n="pageIce">Ice Booking</div>
    <a class="back" href="index.html" data-i18n="home">Home</a>
  </header>

  <div class="card">
    <div class="row">
      <div>
        <label data-i18n="unit">Unit</label>
        <select id="unit">
          <option value="ton" selected data-i18n="uTon">Tons</option>
          <option value="can" data-i18n="uCan">Cans</option>
        </select>
      </div>
      <div>
        <label id="priceLabel">Price (₹/ton)</label>
        <select id="unitPrice">
          <!-- will be filled automatically -->
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label data-i18n="qty">Quantity</label>
        <input id="qty" type="number" min="0" step="0.5" value="1" />
      </div>
      <div>
        <label data-i18n="km">Distance (km)</label>
        <input id="km" type="number" min="0" step="1" value="10" />
      </div>
    </div>

    <div class="row">
      <div>
        <label data-i18n="vehicle">Vehicle</label>
        <select id="vehicle">
          <option value="5">5 Ton Van — ₹200/km</option>
          <option value="8">8 Ton Truck — ₹300/km</option>
        </select>
      </div>
      <div>
        <label data-i18n="rate">Rate (₹/km)</label>
        <input id="vehRate" type="number" value="200" readonly />
      </div>
    </div>
  </div>

  <div class="card">
    <label data-i18n="address">Delivery address</label>
    <textarea id="addr" placeholder="Village/Mandal, Landmark, PIN"></textarea>

    <div class="kpi"><span data-i18n="iceCost">Ice cost</span> <strong id="iceCost">₹ 0</strong></div>
    <div class="kpi"><span data-i18n="transCost">Transport cost</span> <strong id="transCost">₹ 0</strong></div>
    <div class="kpi total"><span data-i18n="total">Total</span> <strong id="total">₹ 0</strong></div>

    <div style="margin-top:10px">
      <a id="bookBtn" class="btn" href="#" target="_blank" rel="noopener" data-i18n="book">Book</a>
    </div>
  </div>

  <footer>© <span id="yr"></span> Aquaculture A–Z Hub</footer>
</div>

<script>
/* i18n — reads language from Home (localStorage 'lang') */
const I18N = {
  en:{pageIce:"Ice Booking", home:"Home", unit:"Unit", uTon:"Tons", uCan:"Cans",
      qty:"Quantity", km:"Distance (km)", vehicle:"Vehicle", rate:"Rate (₹/km)",
      address:"Delivery address", iceCost:"Ice cost", transCost:"Transport cost",
      total:"Total", book:"Book"},
  te:{pageIce:"ఐస్ బుకింగ్", home:"హోమ్", unit:"యూనిట్", uTon:"టన్నులు", uCan:"క్యాన్స్",
      qty:"పరిమాణం", km:"దూరం (కిమీ)", vehicle:"వాహనం", rate:"రేట్ (₹/కిమీ)",
      address:"డెలివరీ చిరునామా", iceCost:"ఐస్ ఖర్చు", transCost:"రవాణా ఖర్చు",
      total:"మొత్తం", book:"బుక్ చేయి"}
};
function getLang(){ return localStorage.getItem('lang') || 'en'; }
function t(k){ return (I18N[getLang()]||{})[k] || k; }
function applyI18N(){
  document.querySelectorAll('[data-i18n]').forEach(el=> el.textContent = t(el.dataset.i18n));
  document.getElementById('priceLabel').textContent = 
      (unit.value==='ton') ? (getLang()==='te' ? "ధర (₹/టన్ను)" : "Price (₹/ton)")
                           : (getLang()==='te' ? "ధర (₹/క్యాన్)" : "Price (₹/can)");
}

/* config: prices & vehicles */
const PRICES = {
  ton:  [2000, 2200, 2500],   // ₹ per ton (choose default)
  can:  [120, 140, 160]       // ₹ per can
};
const VEHICLES = {
  "5": {label: "5 Ton Van", rate: 200},
  "8": {label: "8 Ton Truck", rate: 300}
};

/* elements */
const unit = document.getElementById('unit');
const unitPrice = document.getElementById('unitPrice');
const qty = document.getElementById('qty');
const km = document.getElementById('km');
const vehicle = document.getElementById('vehicle');
const vehRate = document.getElementById('vehRate');
const iceCostEl = document.getElementById('iceCost');
const transCostEl = document.getElementById('transCost');
const totalEl = document.getElementById('total');
const addr = document.getElementById('addr');
const bookBtn = document.getElementById('bookBtn');

/* helpers */
function fillPriceOptions(){
  unitPrice.innerHTML = "";
  (PRICES[unit.value] || []).forEach((p,i)=>{
    const opt = document.createElement('option');
    opt.value = p; opt.textContent = `₹ ${p}`;
    if(i===0) opt.selected = true;
    unitPrice.appendChild(opt);
  });
}
function updateVehRate(){
  const v = VEHICLES[vehicle.value];
  vehRate.value = v ? v.rate : 0;
}
function recalc(){
  const price = parseFloat(unitPrice.value)||0;
  const q = parseFloat(qty.value)||0;
  const kms = parseFloat(km.value)||0;
  const rate = parseFloat(vehRate.value)||0;

  const iceCost = Math.round(price * q);
  const transCost = Math.round(rate * kms);
  const total = iceCost + transCost;

  iceCostEl.textContent = `₹ ${iceCost}`;
  transCostEl.textContent = `₹ ${transCost}`;
  totalEl.textContent = `₹ ${total}`;

  const msg = [
    "Ice Booking",
    `Unit: ${unit.value === 'ton' ? 'Ton(s)' : 'Can(s)'}`,
    `Price: ₹${price} / ${unit.value}`,
    `Quantity: ${q}`,
    `Vehicle: ${VEHICLES[vehicle.value].label} (${rate}₹/km)`,
    `Distance: ${kms} km`,
    `Ice Cost: ₹${iceCost}`,
    `Transport Cost: ₹${transCost}`,
    `Total: ₹${total}`,
    `Address: ${addr.value || '-'}`
  ].join('\n');

  // add your phone: wa.me/91XXXXXXXXXX?text=...
  bookBtn.href = `https://wa.me/?text=${encodeURIComponent(msg)}`;
  bookBtn.disabled = total<=0;
}

/* events */
unit.addEventListener('change', ()=>{ fillPriceOptions(); applyI18N(); recalc(); });
unitPrice.addEventListener('change', recalc);
qty.addEventListener('input', recalc);
km.addEventListener('input', recalc);
vehicle.addEventListener('change', ()=>{ updateVehRate(); recalc(); });
addr.addEventListener('input', recalc);

/* init */
document.getElementById('yr').textContent = new Date().getFullYear();
applyI18N();
fillPriceOptions();
updateVehRate();
recalc();
</script>
</body>
</html>
